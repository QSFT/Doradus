~~~~~~~~~~~~~~
~ XML format ~
~~~~~~~~~~~~~~

~~~~~~~~~~~~~~~~~~~~~~
~ Create application ~
~~~~~~~~~~~~~~~~~~~~~~
*** Request
    POST /Application/_shards/shard
*** Response: 
    200 OK

~~~~~~~~~~~~~~~~~~~~
~ Table of Content ~
~~~~~~~~~~~~~~~~~~~~
*** Request
    GET /Application/SV/_query?q=*&f=_all&shards=shard
*** Response: xml
    200 OK
    <results>
        <totalobjects>10</totalobjects>
        <docs>
            <doc>
                <field name="City">Moscow</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2014-01-01 00:00:00</field>
                <field name="Double">2200.0</field>
                <field name="Float">3300.0</field>
                <field name="IsTested">True</field>
                <field name="People">2014</field>
                <field name="_ID">2001</field>
                <field name="_shard">shard</field>
                <field name="MV">
                    <doc>
                        <field name="City">
                            <value>Moscow</value>
                        </field>
                        <field name="Country">Russia1</field>
                        <field name="_ID">2001</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Saint-Petersburg</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2014-01-01 00:00:00</field>
                <field name="Double">2200.0</field>
                <field name="Float">3300.0</field>
                <field name="IsTested">True</field>
                <field name="People">2014</field>
                <field name="_ID">2002</field>
                <field name="_shard">shard</field>
                <field name="MV">
                    <doc>
                        <field name="City">
                            <value>Moscow</value>
                        </field>
                        <field name="Country">Russia1</field>
                        <field name="_ID">2001</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Tver</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2014-01-01 00:00:00</field>
                <field name="Double">2200.0</field>
                <field name="Float">3300.0</field>
                <field name="IsTested">True</field>
                <field name="People">2014</field>
                <field name="_ID">2003</field>
                <field name="_shard">shard</field>
                <field name="MV">
                    <doc>
                        <field name="City">
                            <value>Moscow</value>
                        </field>
                        <field name="Country">Russia1</field>
                        <field name="_ID">2001</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Pskov</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2014-01-01 00:00:00</field>
                <field name="Double">2200.0</field>
                <field name="Float">3300.0</field>
                <field name="IsTested">True</field>
                <field name="People">2014</field>
                <field name="_ID">2004</field>
                <field name="_shard">shard</field>
                <field name="MV">
                    <doc>
                        <field name="City">
                            <value>Moscow</value>
                        </field>
                        <field name="Country">Russia1</field>
                        <field name="_ID">2001</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Minsk</field>
                <field name="Country">Belorussia</field>
                <field name="CreateDate">2013-01-01 00:00:00</field>
                <field name="Double">5.555</field>
                <field name="Float">4.443999767303467</field>
                <field name="IsTested">False</field>
                <field name="People">2013</field>
                <field name="_ID">2005</field>
                <field name="_shard">shard</field>
                <field name="MV">
                    <doc>
                        <field name="City">
                            <value>Moscow</value>
                            <value>Tver</value>
                        </field>
                        <field name="Country">Russia2</field>
                        <field name="_ID">2002</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Bryansk</field>
                <field name="Country">Belorussia</field>
                <field name="CreateDate">2013-01-01 00:00:00</field>
                <field name="Double">5.555</field>
                <field name="Float">4.443999767303467</field>
                <field name="IsTested">False</field>
                <field name="People">2013</field>
                <field name="_ID">2006</field>
                <field name="_shard">shard</field>
                <field name="MV">
                    <doc>
                        <field name="City">
                            <value>Moscow</value>
                            <value>Tver</value>
                        </field>
                        <field name="Country">Russia2</field>
                        <field name="_ID">2002</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Brest</field>
                <field name="Country">Belorussia</field>
                <field name="CreateDate">2013-01-01 00:00:00</field>
                <field name="Double">5.555</field>
                <field name="Float">4.443999767303467</field>
                <field name="IsTested">False</field>
                <field name="People">2013</field>
                <field name="_ID">2007</field>
                <field name="_shard">shard</field>
                <field name="MV">
                    <doc>
                        <field name="City">
                            <value>Moscow</value>
                            <value>Tver</value>
                        </field>
                        <field name="Country">Russia2</field>
                        <field name="_ID">2002</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Lugansk</field>
                <field name="Country">Ukraine</field>
                <field name="CreateDate">2012-01-01 00:00:00</field>
                <field name="Double">-7.777</field>
                <field name="Float">-6.665999889373779</field>
                <field name="IsTested">True</field>
                <field name="People">2012</field>
                <field name="_ID">2008</field>
                <field name="_shard">shard</field>
                <field name="MV">
                    <doc>
                        <field name="City">
                            <value>Moscow</value>
                            <value>Pskov</value>
                            <value>Tver</value>
                        </field>
                        <field name="Country">Russia3</field>
                        <field name="_ID">2003</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Gorlovka</field>
                <field name="Country">Ukraine</field>
                <field name="CreateDate">2012-01-01 00:00:00</field>
                <field name="Double">-7.777</field>
                <field name="Float">-6.665999889373779</field>
                <field name="IsTested">True</field>
                <field name="People">2012</field>
                <field name="_ID">2009</field>
                <field name="_shard">shard</field>
                <field name="MV">
                    <doc>
                        <field name="City">
                            <value>Moscow</value>
                            <value>Pskov</value>
                            <value>Tver</value>
                        </field>
                        <field name="Country">Russia3</field>
                        <field name="_ID">2003</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Pavlodar</field>
                <field name="Country">Kazakhstan</field>
                <field name="CreateDate">2011-01-01 00:00:00</field>
                <field name="Double">-0.099</field>
                <field name="Float">-0.08799999952316284</field>
                <field name="IsTested">False</field>
                <field name="People">2011</field>
                <field name="_ID">2010</field>
                <field name="_shard">shard</field>
                <field name="MV">
                    <doc>
                        <field name="City">
                            <value>Moscow</value>
                            <value>Pavlovsk</value>
                            <value>Pskov</value>
                            <value>Tver</value>
                        </field>
                        <field name="Country">Russia4</field>
                        <field name="_ID">2004</field>
                    </doc>
                </field>
            </doc>
        </docs>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "totalobjects":"10",
          "docs":[
             {
                "doc":{
                   "City":"Moscow",
                   "Country":"Russia",
                   "CreateDate":"2014-01-01 00:00:00",
                   "Double":"2200.0",
                   "Float":"3300.0",
                   "IsTested":"True",
                   "People":"2014",
                   "_ID":"2001",
                   "_shard":"shard",
                   "MV":[
                      {
                         "doc":{
                            "City":[
                               "Moscow"
                            ],
                            "Country":"Russia1",
                            "_ID":"2001"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Saint-Petersburg",
                   "Country":"Russia",
                   "CreateDate":"2014-01-01 00:00:00",
                   "Double":"2200.0",
                   "Float":"3300.0",
                   "IsTested":"True",
                   "People":"2014",
                   "_ID":"2002",
                   "_shard":"shard",
                   "MV":[
                      {
                         "doc":{
                            "City":[
                               "Moscow"
                            ],
                            "Country":"Russia1",
                            "_ID":"2001"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Tver",
                   "Country":"Russia",
                   "CreateDate":"2014-01-01 00:00:00",
                   "Double":"2200.0",
                   "Float":"3300.0",
                   "IsTested":"True",
                   "People":"2014",
                   "_ID":"2003",
                   "_shard":"shard",
                   "MV":[
                      {
                         "doc":{
                            "City":[
                               "Moscow"
                            ],
                            "Country":"Russia1",
                            "_ID":"2001"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Pskov",
                   "Country":"Russia",
                   "CreateDate":"2014-01-01 00:00:00",
                   "Double":"2200.0",
                   "Float":"3300.0",
                   "IsTested":"True",
                   "People":"2014",
                   "_ID":"2004",
                   "_shard":"shard",
                   "MV":[
                      {
                         "doc":{
                            "City":[
                               "Moscow"
                            ],
                            "Country":"Russia1",
                            "_ID":"2001"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Minsk",
                   "Country":"Belorussia",
                   "CreateDate":"2013-01-01 00:00:00",
                   "Double":"5.555",
                   "Float":"4.443999767303467",
                   "IsTested":"False",
                   "People":"2013",
                   "_ID":"2005",
                   "_shard":"shard",
                   "MV":[
                      {
                         "doc":{
                            "City":[
                               "Moscow",
                               "Tver"
                            ],
                            "Country":"Russia2",
                            "_ID":"2002"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Bryansk",
                   "Country":"Belorussia",
                   "CreateDate":"2013-01-01 00:00:00",
                   "Double":"5.555",
                   "Float":"4.443999767303467",
                   "IsTested":"False",
                   "People":"2013",
                   "_ID":"2006",
                   "_shard":"shard",
                   "MV":[
                      {
                         "doc":{
                            "City":[
                               "Moscow",
                               "Tver"
                            ],
                            "Country":"Russia2",
                            "_ID":"2002"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Brest",
                   "Country":"Belorussia",
                   "CreateDate":"2013-01-01 00:00:00",
                   "Double":"5.555",
                   "Float":"4.443999767303467",
                   "IsTested":"False",
                   "People":"2013",
                   "_ID":"2007",
                   "_shard":"shard",
                   "MV":[
                      {
                         "doc":{
                            "City":[
                               "Moscow",
                               "Tver"
                            ],
                            "Country":"Russia2",
                            "_ID":"2002"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Lugansk",
                   "Country":"Ukraine",
                   "CreateDate":"2012-01-01 00:00:00",
                   "Double":"-7.777",
                   "Float":"-6.665999889373779",
                   "IsTested":"True",
                   "People":"2012",
                   "_ID":"2008",
                   "_shard":"shard",
                   "MV":[
                      {
                         "doc":{
                            "City":[
                               "Moscow",
                               "Pskov",
                               "Tver"
                            ],
                            "Country":"Russia3",
                            "_ID":"2003"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Gorlovka",
                   "Country":"Ukraine",
                   "CreateDate":"2012-01-01 00:00:00",
                   "Double":"-7.777",
                   "Float":"-6.665999889373779",
                   "IsTested":"True",
                   "People":"2012",
                   "_ID":"2009",
                   "_shard":"shard",
                   "MV":[
                      {
                         "doc":{
                            "City":[
                               "Moscow",
                               "Pskov",
                               "Tver"
                            ],
                            "Country":"Russia3",
                            "_ID":"2003"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Pavlodar",
                   "Country":"Kazakhstan",
                   "CreateDate":"2011-01-01 00:00:00",
                   "Double":"-0.099",
                   "Float":"-0.08799999952316284",
                   "IsTested":"False",
                   "People":"2011",
                   "_ID":"2010",
                   "_shard":"shard",
                   "MV":[
                      {
                         "doc":{
                            "City":[
                               "Moscow",
                               "Pavlovsk",
                               "Pskov",
                               "Tver"
                            ],
                            "Country":"Russia4",
                            "_ID":"2004"
                         }
                      }
                   ]
                }
             }
          ]
       }
    }

*** Request
    GET /Application/MV/_query?q=*&f=_all&shards=shard
*** Response: xml
    200 OK
    <results>
        <totalobjects>4</totalobjects>
        <docs>
            <doc>
                <field name="City">
                    <value>Moscow</value>
                </field>
                <field name="Country">Russia1</field>
                <field name="_ID">2001</field>
                <field name="_shard">shard</field>
                <field name="SV">
                    <doc>
                        <field name="City">Moscow</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2014-01-01 00:00:00</field>
                        <field name="Double">2200.0</field>
                        <field name="Float">3300.0</field>
                        <field name="IsTested">True</field>
                        <field name="People">2014</field>
                        <field name="_ID">2001</field>
                    </doc>
                    <doc>
                        <field name="City">Saint-Petersburg</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2014-01-01 00:00:00</field>
                        <field name="Double">2200.0</field>
                        <field name="Float">3300.0</field>
                        <field name="IsTested">True</field>
                        <field name="People">2014</field>
                        <field name="_ID">2002</field>
                    </doc>
                    <doc>
                        <field name="City">Tver</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2014-01-01 00:00:00</field>
                        <field name="Double">2200.0</field>
                        <field name="Float">3300.0</field>
                        <field name="IsTested">True</field>
                        <field name="People">2014</field>
                        <field name="_ID">2003</field>
                    </doc>
                    <doc>
                        <field name="City">Pskov</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2014-01-01 00:00:00</field>
                        <field name="Double">2200.0</field>
                        <field name="Float">3300.0</field>
                        <field name="IsTested">True</field>
                        <field name="People">2014</field>
                        <field name="_ID">2004</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">
                    <value>Moscow</value>
                    <value>Tver</value>
                </field>
                <field name="Country">Russia2</field>
                <field name="_ID">2002</field>
                <field name="_shard">shard</field>
                <field name="SV">
                    <doc>
                        <field name="City">Minsk</field>
                        <field name="Country">Belorussia</field>
                        <field name="CreateDate">2013-01-01 00:00:00</field>
                        <field name="Double">5.555</field>
                        <field name="Float">4.443999767303467</field>
                        <field name="IsTested">False</field>
                        <field name="People">2013</field>
                        <field name="_ID">2005</field>
                    </doc>
                    <doc>
                        <field name="City">Bryansk</field>
                        <field name="Country">Belorussia</field>
                        <field name="CreateDate">2013-01-01 00:00:00</field>
                        <field name="Double">5.555</field>
                        <field name="Float">4.443999767303467</field>
                        <field name="IsTested">False</field>
                        <field name="People">2013</field>
                        <field name="_ID">2006</field>
                    </doc>
                    <doc>
                        <field name="City">Brest</field>
                        <field name="Country">Belorussia</field>
                        <field name="CreateDate">2013-01-01 00:00:00</field>
                        <field name="Double">5.555</field>
                        <field name="Float">4.443999767303467</field>
                        <field name="IsTested">False</field>
                        <field name="People">2013</field>
                        <field name="_ID">2007</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">
                    <value>Moscow</value>
                    <value>Pskov</value>
                    <value>Tver</value>
                </field>
                <field name="Country">Russia3</field>
                <field name="_ID">2003</field>
                <field name="_shard">shard</field>
                <field name="SV">
                    <doc>
                        <field name="City">Lugansk</field>
                        <field name="Country">Ukraine</field>
                        <field name="CreateDate">2012-01-01 00:00:00</field>
                        <field name="Double">-7.777</field>
                        <field name="Float">-6.665999889373779</field>
                        <field name="IsTested">True</field>
                        <field name="People">2012</field>
                        <field name="_ID">2008</field>
                    </doc>
                    <doc>
                        <field name="City">Gorlovka</field>
                        <field name="Country">Ukraine</field>
                        <field name="CreateDate">2012-01-01 00:00:00</field>
                        <field name="Double">-7.777</field>
                        <field name="Float">-6.665999889373779</field>
                        <field name="IsTested">True</field>
                        <field name="People">2012</field>
                        <field name="_ID">2009</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">
                    <value>Moscow</value>
                    <value>Pavlovsk</value>
                    <value>Pskov</value>
                    <value>Tver</value>
                </field>
                <field name="Country">Russia4</field>
                <field name="_ID">2004</field>
                <field name="_shard">shard</field>
                <field name="SV">
                    <doc>
                        <field name="City">Pavlodar</field>
                        <field name="Country">Kazakhstan</field>
                        <field name="CreateDate">2011-01-01 00:00:00</field>
                        <field name="Double">-0.099</field>
                        <field name="Float">-0.08799999952316284</field>
                        <field name="IsTested">False</field>
                        <field name="People">2011</field>
                        <field name="_ID">2010</field>
                    </doc>
                </field>
            </doc>
        </docs>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "totalobjects":"4",
          "docs":[
             {
                "doc":{
                   "City":[
                      "Moscow"
                   ],
                   "Country":"Russia1",
                   "_ID":"2001",
                   "_shard":"shard",
                   "SV":[
                      {
                         "doc":{
                            "City":"Moscow",
                            "Country":"Russia",
                            "CreateDate":"2014-01-01 00:00:00",
                            "Double":"2200.0",
                            "Float":"3300.0",
                            "IsTested":"True",
                            "People":"2014",
                            "_ID":"2001"
                         }
                      },
                      {
                         "doc":{
                            "City":"Saint-Petersburg",
                            "Country":"Russia",
                            "CreateDate":"2014-01-01 00:00:00",
                            "Double":"2200.0",
                            "Float":"3300.0",
                            "IsTested":"True",
                            "People":"2014",
                            "_ID":"2002"
                         }
                      },
                      {
                         "doc":{
                            "City":"Tver",
                            "Country":"Russia",
                            "CreateDate":"2014-01-01 00:00:00",
                            "Double":"2200.0",
                            "Float":"3300.0",
                            "IsTested":"True",
                            "People":"2014",
                            "_ID":"2003"
                         }
                      },
                      {
                         "doc":{
                            "City":"Pskov",
                            "Country":"Russia",
                            "CreateDate":"2014-01-01 00:00:00",
                            "Double":"2200.0",
                            "Float":"3300.0",
                            "IsTested":"True",
                            "People":"2014",
                            "_ID":"2004"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":[
                      "Moscow",
                      "Tver"
                   ],
                   "Country":"Russia2",
                   "_ID":"2002",
                   "_shard":"shard",
                   "SV":[
                      {
                         "doc":{
                            "City":"Minsk",
                            "Country":"Belorussia",
                            "CreateDate":"2013-01-01 00:00:00",
                            "Double":"5.555",
                            "Float":"4.443999767303467",
                            "IsTested":"False",
                            "People":"2013",
                            "_ID":"2005"
                         }
                      },
                      {
                         "doc":{
                            "City":"Bryansk",
                            "Country":"Belorussia",
                            "CreateDate":"2013-01-01 00:00:00",
                            "Double":"5.555",
                            "Float":"4.443999767303467",
                            "IsTested":"False",
                            "People":"2013",
                            "_ID":"2006"
                         }
                      },
                      {
                         "doc":{
                            "City":"Brest",
                            "Country":"Belorussia",
                            "CreateDate":"2013-01-01 00:00:00",
                            "Double":"5.555",
                            "Float":"4.443999767303467",
                            "IsTested":"False",
                            "People":"2013",
                            "_ID":"2007"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":[
                      "Moscow",
                      "Pskov",
                      "Tver"
                   ],
                   "Country":"Russia3",
                   "_ID":"2003",
                   "_shard":"shard",
                   "SV":[
                      {
                         "doc":{
                            "City":"Lugansk",
                            "Country":"Ukraine",
                            "CreateDate":"2012-01-01 00:00:00",
                            "Double":"-7.777",
                            "Float":"-6.665999889373779",
                            "IsTested":"True",
                            "People":"2012",
                            "_ID":"2008"
                         }
                      },
                      {
                         "doc":{
                            "City":"Gorlovka",
                            "Country":"Ukraine",
                            "CreateDate":"2012-01-01 00:00:00",
                            "Double":"-7.777",
                            "Float":"-6.665999889373779",
                            "IsTested":"True",
                            "People":"2012",
                            "_ID":"2009"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":[
                      "Moscow",
                      "Pavlovsk",
                      "Pskov",
                      "Tver"
                   ],
                   "Country":"Russia4",
                   "_ID":"2004",
                   "_shard":"shard",
                   "SV":[
                      {
                         "doc":{
                            "City":"Pavlodar",
                            "Country":"Kazakhstan",
                            "CreateDate":"2011-01-01 00:00:00",
                            "Double":"-0.099",
                            "Float":"-0.08799999952316284",
                            "IsTested":"False",
                            "People":"2011",
                            "_ID":"2010"
                         }
                      }
                   ]
                }
             }
          ]
       }
    }

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~ Test for TOTAL GROUP for TOP and BOTTOM aggr queries ~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~
~ LINK ~
~~~~~~~~
*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(0, MV)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(0, MV)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="MV">2001</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="MV">2002</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="MV">2003</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="MV">2004</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(0, MV)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "MV":"2001"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "MV":"2002"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "MV":"2003"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "MV":"2004"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(1, MV)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(1, MV)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="MV">2001</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(1, MV)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "MV":"2001"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(10, MV)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(10, MV)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="MV">2001</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="MV">2002</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="MV">2003</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="MV">2004</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(10, MV)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "MV":"2001"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "MV":"2002"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "MV":"2003"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "MV":"2004"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(0, MV)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(0, MV)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="MV">2004</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="MV">2003</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="MV">2002</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="MV">2001</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(0, MV)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "MV":"2004"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "MV":"2003"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "MV":"2002"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "MV":"2001"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(1, MV)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(1, MV)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="MV">2004</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(1, MV)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "MV":"2004"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(10, MV)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(10, MV)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="MV">2004</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="MV">2003</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="MV">2002</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="MV">2001</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(10, MV)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "MV":"2004"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "MV":"2003"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "MV":"2002"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "MV":"2001"
                   }
                }
             }
          ]
       }
    }

~~~~~~~~~~~
~ BOOLEAN ~
~~~~~~~~~~~
*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(0, IsTested)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(0, IsTested)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>6</metric>
                <field name="IsTested">true</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="IsTested">false</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(0, IsTested)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"6",
                   "field":{
                      "IsTested":"true"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "IsTested":"false"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(1, IsTested)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(1, IsTested)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>6</metric>
                <field name="IsTested">true</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(1, IsTested)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"6",
                   "field":{
                      "IsTested":"true"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(10, IsTested)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(10, IsTested)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>6</metric>
                <field name="IsTested">true</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="IsTested">false</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(10, IsTested)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"6",
                   "field":{
                      "IsTested":"true"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "IsTested":"false"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(0, IsTested)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(0, IsTested)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="IsTested">false</field>
            </group>
            <group>
                <metric>6</metric>
                <field name="IsTested">true</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(0, IsTested)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "IsTested":"false"
                   }
                }
             },
             {
                "group":{
                   "metric":"6",
                   "field":{
                      "IsTested":"true"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(1, IsTested)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(1, IsTested)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="IsTested">false</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(1, IsTested)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "IsTested":"false"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(10, IsTested)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(10, IsTested)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="IsTested">false</field>
            </group>
            <group>
                <metric>6</metric>
                <field name="IsTested">true</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(10, IsTested)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "IsTested":"false"
                   }
                }
             },
             {
                "group":{
                   "metric":"6",
                   "field":{
                      "IsTested":"true"
                   }
                }
             }
          ]
       }
    }

~~~~~~~~~
~ FLOAT ~
~~~~~~~~~
*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(0, Float)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(0, Float)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="Float">3300</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Float">4.443999767</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Float">-6.665999889</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="Float">-0.088</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(0, Float)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Float":"3300"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Float":"4.443999767"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Float":"-6.665999889"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Float":"-0.088"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(1, Float)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(1, Float)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="Float">3300</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(1, Float)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Float":"3300"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(10, Float)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(10, Float)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="Float">3300</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Float">4.443999767</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Float">-6.665999889</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="Float">-0.088</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(10, Float)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Float":"3300"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Float":"4.443999767"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Float":"-6.665999889"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Float":"-0.088"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(0, Float)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(0, Float)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="Float">-0.088</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Float">-6.665999889</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Float">4.443999767</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="Float">3300</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(0, Float)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Float":"-0.088"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Float":"-6.665999889"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Float":"4.443999767"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Float":"3300"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(1, Float)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(1, Float)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="Float">-0.088</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(1, Float)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Float":"-0.088"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(10, Float)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(10, Float)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="Float">-0.088</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Float">-6.665999889</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Float">4.443999767</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="Float">3300</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(10, Float)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Float":"-0.088"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Float":"-6.665999889"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Float":"4.443999767"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Float":"3300"
                   }
                }
             }
          ]
       }
    }

~~~~~~~~~~
~ DOUBLE ~
~~~~~~~~~~
*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(0, Double)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(0, Double)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="Double">2200</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Double">5.555</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Double">-7.777</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="Double">-0.099</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(0, Double)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Double":"2200"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Double":"5.555"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Double":"-7.777"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Double":"-0.099"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(1, Double)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(1, Double)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="Double">2200</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(1, Double)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Double":"2200"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(10, Double)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(10, Double)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="Double">2200</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Double">5.555</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Double">-7.777</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="Double">-0.099</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(10, Double)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Double":"2200"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Double":"5.555"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Double":"-7.777"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Double":"-0.099"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(0, Double)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(0, Double)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="Double">-0.099</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Double">-7.777</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Double">5.555</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="Double">2200</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(0, Double)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Double":"-0.099"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Double":"-7.777"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Double":"5.555"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Double":"2200"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(1, Double)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(1, Double)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="Double">-0.099</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(1, Double)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Double":"-0.099"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(10, Double)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(10, Double)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="Double">-0.099</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Double">-7.777</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Double">5.555</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="Double">2200</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(10, Double)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Double":"-0.099"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Double":"-7.777"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Double":"5.555"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Double":"2200"
                   }
                }
             }
          ]
       }
    }

~~~~~~~~~~~
~ INTEGER ~
~~~~~~~~~~~
*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(0, People)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(0, People)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="People">2014</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="People">2013</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="People">2012</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="People">2011</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(0, People)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "People":"2014"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "People":"2013"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "People":"2012"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "People":"2011"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(1, People)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(1, People)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="People">2014</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(1, People)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "People":"2014"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(10, People)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(10, People)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="People">2014</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="People">2013</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="People">2012</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="People">2011</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(10, People)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "People":"2014"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "People":"2013"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "People":"2012"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "People":"2011"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(0, People)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(0, People)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="People">2011</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="People">2012</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="People">2013</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="People">2014</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(0, People)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "People":"2011"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "People":"2012"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "People":"2013"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "People":"2014"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(1, People)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(1, People)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="People">2011</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(1, People)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "People":"2011"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(10, People)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(10, People)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="People">2011</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="People">2012</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="People">2013</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="People">2014</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(10, People)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "People":"2011"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "People":"2012"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "People":"2013"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "People":"2014"
                   }
                }
             }
          ]
       }
    }

~~~~~~~~~~~~~
~ TIMESTAMP ~
~~~~~~~~~~~~~
*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(0, CreateDate)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(0, CreateDate)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="CreateDate">2014-01-01 00:00:00</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="CreateDate">2013-01-01 00:00:00</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="CreateDate">2012-01-01 00:00:00</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="CreateDate">2011-01-01 00:00:00</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(0, CreateDate)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "CreateDate":"2014-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "CreateDate":"2013-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "CreateDate":"2012-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "CreateDate":"2011-01-01 00:00:00"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(1, CreateDate)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(1, CreateDate)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="CreateDate">2014-01-01 00:00:00</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(1, CreateDate)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "CreateDate":"2014-01-01 00:00:00"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(10, CreateDate)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(10, CreateDate)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="CreateDate">2014-01-01 00:00:00</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="CreateDate">2013-01-01 00:00:00</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="CreateDate">2012-01-01 00:00:00</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="CreateDate">2011-01-01 00:00:00</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(10, CreateDate)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "CreateDate":"2014-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "CreateDate":"2013-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "CreateDate":"2012-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "CreateDate":"2011-01-01 00:00:00"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(0, CreateDate)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(0, CreateDate)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="CreateDate">2011-01-01 00:00:00</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="CreateDate">2012-01-01 00:00:00</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="CreateDate">2013-01-01 00:00:00</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="CreateDate">2014-01-01 00:00:00</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(0, CreateDate)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "CreateDate":"2011-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "CreateDate":"2012-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "CreateDate":"2013-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "CreateDate":"2014-01-01 00:00:00"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(1, CreateDate)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(1, CreateDate)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="CreateDate">2011-01-01 00:00:00</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(1, CreateDate)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "CreateDate":"2011-01-01 00:00:00"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(10, CreateDate)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(10, CreateDate)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="CreateDate">2011-01-01 00:00:00</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="CreateDate">2012-01-01 00:00:00</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="CreateDate">2013-01-01 00:00:00</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="CreateDate">2014-01-01 00:00:00</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(10, CreateDate)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "CreateDate":"2011-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "CreateDate":"2012-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "CreateDate":"2013-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "CreateDate":"2014-01-01 00:00:00"
                   }
                }
             }
          ]
       }
    }

~~~~~~
~ SV ~
~~~~~~
*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(0, Country)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(0, Country)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Country">Belorussia</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Country">Ukraine</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="Country">Kazakhstan</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(0, Country)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Country":"Belorussia"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Country":"Ukraine"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Country":"Kazakhstan"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(1, Country)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(1, Country)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="Country">Russia</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(1, Country)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Country":"Russia"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(10, Country)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(10, Country)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Country">Belorussia</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Country">Ukraine</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="Country">Kazakhstan</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(10, Country)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Country":"Belorussia"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Country":"Ukraine"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Country":"Kazakhstan"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(0, Country)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(0, Country)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="Country">Kazakhstan</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Country">Ukraine</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Country">Belorussia</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="Country">Russia</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(0, Country)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Country":"Kazakhstan"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Country":"Ukraine"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Country":"Belorussia"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Country":"Russia"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(1, Country)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(1, Country)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="Country">Kazakhstan</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(1, Country)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Country":"Kazakhstan"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(10, Country)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(10, Country)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="Country">Kazakhstan</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Country">Ukraine</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Country">Belorussia</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="Country">Russia</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(10, Country)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Country":"Kazakhstan"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Country":"Ukraine"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Country":"Belorussia"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Country":"Russia"
                   }
                }
             }
          ]
       }
    }

~~~~~~
~ MV ~
~~~~~~
*** Request
    GET /Application/MV/_aggregate?m=COUNT(Country)&f=TOP(0, City)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(0, City)" metric="COUNT(Country)" query="*"/>
        <totalobjects>4</totalobjects>
        <summary>4</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="City">Moscow</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="City">Tver</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="City">Pskov</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="City">Pavlovsk</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(Country)",
             "query":"*",
             "group":"TOP(0, City)"
          },
          "totalobjects":"4",
          "summary":"4",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "City":"Moscow"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "City":"Tver"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "City":"Pskov"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "City":"Pavlovsk"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/MV/_aggregate?m=COUNT(Country)&f=TOP(1, City)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(1, City)" metric="COUNT(Country)" query="*"/>
        <totalobjects>4</totalobjects>
        <summary>4</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="City">Moscow</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(Country)",
             "query":"*",
             "group":"TOP(1, City)"
          },
          "totalobjects":"4",
          "summary":"4",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "City":"Moscow"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/MV/_aggregate?m=COUNT(Country)&f=TOP(10, City)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(10, City)" metric="COUNT(Country)" query="*"/>
        <totalobjects>4</totalobjects>
        <summary>4</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="City">Moscow</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="City">Tver</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="City">Pskov</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="City">Pavlovsk</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(Country)",
             "query":"*",
             "group":"TOP(10, City)"
          },
          "totalobjects":"4",
          "summary":"4",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "City":"Moscow"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "City":"Tver"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "City":"Pskov"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "City":"Pavlovsk"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/MV/_aggregate?m=COUNT(Country)&f=BOTTOM(0, City)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(0, City)" metric="COUNT(Country)" query="*"/>
        <totalobjects>4</totalobjects>
        <summary>4</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="City">Pavlovsk</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="City">Pskov</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="City">Tver</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="City">Moscow</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(Country)",
             "query":"*",
             "group":"BOTTOM(0, City)"
          },
          "totalobjects":"4",
          "summary":"4",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "City":"Pavlovsk"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "City":"Pskov"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "City":"Tver"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "City":"Moscow"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/MV/_aggregate?m=COUNT(Country)&f=BOTTOM(1, City)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(1, City)" metric="COUNT(Country)" query="*"/>
        <totalobjects>4</totalobjects>
        <summary>4</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="City">Pavlovsk</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(Country)",
             "query":"*",
             "group":"BOTTOM(1, City)"
          },
          "totalobjects":"4",
          "summary":"4",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "City":"Pavlovsk"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/MV/_aggregate?m=COUNT(Country)&f=BOTTOM(10, City)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(10, City)" metric="COUNT(Country)" query="*"/>
        <totalobjects>4</totalobjects>
        <summary>4</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="City">Pavlovsk</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="City">Pskov</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="City">Tver</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="City">Moscow</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(Country)",
             "query":"*",
             "group":"BOTTOM(10, City)"
          },
          "totalobjects":"4",
          "summary":"4",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "City":"Pavlovsk"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "City":"Pskov"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "City":"Tver"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "City":"Moscow"
                   }
                }
             }
          ]
       }
    }

*** Request
    DELETE /_applications/Application/ApplicationKey
*** Response: 
    200 OK

~~~~~~~~~~~~~~~
~ JSON format ~
~~~~~~~~~~~~~~~

~~~~~~~~~~~~~~~~~~~~~~
~ Create application ~
~~~~~~~~~~~~~~~~~~~~~~
*** Request
    POST /Application/_shards/shard
*** Response: 
    200 OK

~~~~~~~~~~~~~~~~~~~~
~ Table of Content ~
~~~~~~~~~~~~~~~~~~~~
*** Request
    GET /Application/SV/_query?q=*&f=_all&shards=shard
*** Response: xml
    200 OK
    <results>
        <totalobjects>10</totalobjects>
        <docs>
            <doc>
                <field name="City">Moscow</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2014-01-01 00:00:00</field>
                <field name="Double">2200.0</field>
                <field name="Float">3300.0</field>
                <field name="IsTested">True</field>
                <field name="People">2014</field>
                <field name="_ID">2001</field>
                <field name="_shard">shard</field>
                <field name="MV">
                    <doc>
                        <field name="City">
                            <value>Moscow</value>
                        </field>
                        <field name="Country">Russia1</field>
                        <field name="_ID">2001</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Saint-Petersburg</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2014-01-01 00:00:00</field>
                <field name="Double">2200.0</field>
                <field name="Float">3300.0</field>
                <field name="IsTested">True</field>
                <field name="People">2014</field>
                <field name="_ID">2002</field>
                <field name="_shard">shard</field>
                <field name="MV">
                    <doc>
                        <field name="City">
                            <value>Moscow</value>
                        </field>
                        <field name="Country">Russia1</field>
                        <field name="_ID">2001</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Tver</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2014-01-01 00:00:00</field>
                <field name="Double">2200.0</field>
                <field name="Float">3300.0</field>
                <field name="IsTested">True</field>
                <field name="People">2014</field>
                <field name="_ID">2003</field>
                <field name="_shard">shard</field>
                <field name="MV">
                    <doc>
                        <field name="City">
                            <value>Moscow</value>
                        </field>
                        <field name="Country">Russia1</field>
                        <field name="_ID">2001</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Pskov</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2014-01-01 00:00:00</field>
                <field name="Double">2200.0</field>
                <field name="Float">3300.0</field>
                <field name="IsTested">True</field>
                <field name="People">2014</field>
                <field name="_ID">2004</field>
                <field name="_shard">shard</field>
                <field name="MV">
                    <doc>
                        <field name="City">
                            <value>Moscow</value>
                        </field>
                        <field name="Country">Russia1</field>
                        <field name="_ID">2001</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Minsk</field>
                <field name="Country">Belorussia</field>
                <field name="CreateDate">2013-01-01 00:00:00</field>
                <field name="Double">5.555</field>
                <field name="Float">4.443999767303467</field>
                <field name="IsTested">False</field>
                <field name="People">2013</field>
                <field name="_ID">2005</field>
                <field name="_shard">shard</field>
                <field name="MV">
                    <doc>
                        <field name="City">
                            <value>Moscow</value>
                            <value>Tver</value>
                        </field>
                        <field name="Country">Russia2</field>
                        <field name="_ID">2002</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Bryansk</field>
                <field name="Country">Belorussia</field>
                <field name="CreateDate">2013-01-01 00:00:00</field>
                <field name="Double">5.555</field>
                <field name="Float">4.443999767303467</field>
                <field name="IsTested">False</field>
                <field name="People">2013</field>
                <field name="_ID">2006</field>
                <field name="_shard">shard</field>
                <field name="MV">
                    <doc>
                        <field name="City">
                            <value>Moscow</value>
                            <value>Tver</value>
                        </field>
                        <field name="Country">Russia2</field>
                        <field name="_ID">2002</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Brest</field>
                <field name="Country">Belorussia</field>
                <field name="CreateDate">2013-01-01 00:00:00</field>
                <field name="Double">5.555</field>
                <field name="Float">4.443999767303467</field>
                <field name="IsTested">False</field>
                <field name="People">2013</field>
                <field name="_ID">2007</field>
                <field name="_shard">shard</field>
                <field name="MV">
                    <doc>
                        <field name="City">
                            <value>Moscow</value>
                            <value>Tver</value>
                        </field>
                        <field name="Country">Russia2</field>
                        <field name="_ID">2002</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Lugansk</field>
                <field name="Country">Ukraine</field>
                <field name="CreateDate">2012-01-01 00:00:00</field>
                <field name="Double">-7.777</field>
                <field name="Float">-6.665999889373779</field>
                <field name="IsTested">True</field>
                <field name="People">2012</field>
                <field name="_ID">2008</field>
                <field name="_shard">shard</field>
                <field name="MV">
                    <doc>
                        <field name="City">
                            <value>Moscow</value>
                            <value>Pskov</value>
                            <value>Tver</value>
                        </field>
                        <field name="Country">Russia3</field>
                        <field name="_ID">2003</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Gorlovka</field>
                <field name="Country">Ukraine</field>
                <field name="CreateDate">2012-01-01 00:00:00</field>
                <field name="Double">-7.777</field>
                <field name="Float">-6.665999889373779</field>
                <field name="IsTested">True</field>
                <field name="People">2012</field>
                <field name="_ID">2009</field>
                <field name="_shard">shard</field>
                <field name="MV">
                    <doc>
                        <field name="City">
                            <value>Moscow</value>
                            <value>Pskov</value>
                            <value>Tver</value>
                        </field>
                        <field name="Country">Russia3</field>
                        <field name="_ID">2003</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Pavlodar</field>
                <field name="Country">Kazakhstan</field>
                <field name="CreateDate">2011-01-01 00:00:00</field>
                <field name="Double">-0.099</field>
                <field name="Float">-0.08799999952316284</field>
                <field name="IsTested">False</field>
                <field name="People">2011</field>
                <field name="_ID">2010</field>
                <field name="_shard">shard</field>
                <field name="MV">
                    <doc>
                        <field name="City">
                            <value>Moscow</value>
                            <value>Pavlovsk</value>
                            <value>Pskov</value>
                            <value>Tver</value>
                        </field>
                        <field name="Country">Russia4</field>
                        <field name="_ID">2004</field>
                    </doc>
                </field>
            </doc>
        </docs>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "totalobjects":"10",
          "docs":[
             {
                "doc":{
                   "City":"Moscow",
                   "Country":"Russia",
                   "CreateDate":"2014-01-01 00:00:00",
                   "Double":"2200.0",
                   "Float":"3300.0",
                   "IsTested":"True",
                   "People":"2014",
                   "_ID":"2001",
                   "_shard":"shard",
                   "MV":[
                      {
                         "doc":{
                            "City":[
                               "Moscow"
                            ],
                            "Country":"Russia1",
                            "_ID":"2001"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Saint-Petersburg",
                   "Country":"Russia",
                   "CreateDate":"2014-01-01 00:00:00",
                   "Double":"2200.0",
                   "Float":"3300.0",
                   "IsTested":"True",
                   "People":"2014",
                   "_ID":"2002",
                   "_shard":"shard",
                   "MV":[
                      {
                         "doc":{
                            "City":[
                               "Moscow"
                            ],
                            "Country":"Russia1",
                            "_ID":"2001"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Tver",
                   "Country":"Russia",
                   "CreateDate":"2014-01-01 00:00:00",
                   "Double":"2200.0",
                   "Float":"3300.0",
                   "IsTested":"True",
                   "People":"2014",
                   "_ID":"2003",
                   "_shard":"shard",
                   "MV":[
                      {
                         "doc":{
                            "City":[
                               "Moscow"
                            ],
                            "Country":"Russia1",
                            "_ID":"2001"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Pskov",
                   "Country":"Russia",
                   "CreateDate":"2014-01-01 00:00:00",
                   "Double":"2200.0",
                   "Float":"3300.0",
                   "IsTested":"True",
                   "People":"2014",
                   "_ID":"2004",
                   "_shard":"shard",
                   "MV":[
                      {
                         "doc":{
                            "City":[
                               "Moscow"
                            ],
                            "Country":"Russia1",
                            "_ID":"2001"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Minsk",
                   "Country":"Belorussia",
                   "CreateDate":"2013-01-01 00:00:00",
                   "Double":"5.555",
                   "Float":"4.443999767303467",
                   "IsTested":"False",
                   "People":"2013",
                   "_ID":"2005",
                   "_shard":"shard",
                   "MV":[
                      {
                         "doc":{
                            "City":[
                               "Moscow",
                               "Tver"
                            ],
                            "Country":"Russia2",
                            "_ID":"2002"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Bryansk",
                   "Country":"Belorussia",
                   "CreateDate":"2013-01-01 00:00:00",
                   "Double":"5.555",
                   "Float":"4.443999767303467",
                   "IsTested":"False",
                   "People":"2013",
                   "_ID":"2006",
                   "_shard":"shard",
                   "MV":[
                      {
                         "doc":{
                            "City":[
                               "Moscow",
                               "Tver"
                            ],
                            "Country":"Russia2",
                            "_ID":"2002"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Brest",
                   "Country":"Belorussia",
                   "CreateDate":"2013-01-01 00:00:00",
                   "Double":"5.555",
                   "Float":"4.443999767303467",
                   "IsTested":"False",
                   "People":"2013",
                   "_ID":"2007",
                   "_shard":"shard",
                   "MV":[
                      {
                         "doc":{
                            "City":[
                               "Moscow",
                               "Tver"
                            ],
                            "Country":"Russia2",
                            "_ID":"2002"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Lugansk",
                   "Country":"Ukraine",
                   "CreateDate":"2012-01-01 00:00:00",
                   "Double":"-7.777",
                   "Float":"-6.665999889373779",
                   "IsTested":"True",
                   "People":"2012",
                   "_ID":"2008",
                   "_shard":"shard",
                   "MV":[
                      {
                         "doc":{
                            "City":[
                               "Moscow",
                               "Pskov",
                               "Tver"
                            ],
                            "Country":"Russia3",
                            "_ID":"2003"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Gorlovka",
                   "Country":"Ukraine",
                   "CreateDate":"2012-01-01 00:00:00",
                   "Double":"-7.777",
                   "Float":"-6.665999889373779",
                   "IsTested":"True",
                   "People":"2012",
                   "_ID":"2009",
                   "_shard":"shard",
                   "MV":[
                      {
                         "doc":{
                            "City":[
                               "Moscow",
                               "Pskov",
                               "Tver"
                            ],
                            "Country":"Russia3",
                            "_ID":"2003"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Pavlodar",
                   "Country":"Kazakhstan",
                   "CreateDate":"2011-01-01 00:00:00",
                   "Double":"-0.099",
                   "Float":"-0.08799999952316284",
                   "IsTested":"False",
                   "People":"2011",
                   "_ID":"2010",
                   "_shard":"shard",
                   "MV":[
                      {
                         "doc":{
                            "City":[
                               "Moscow",
                               "Pavlovsk",
                               "Pskov",
                               "Tver"
                            ],
                            "Country":"Russia4",
                            "_ID":"2004"
                         }
                      }
                   ]
                }
             }
          ]
       }
    }

*** Request
    GET /Application/MV/_query?q=*&f=_all&shards=shard
*** Response: xml
    200 OK
    <results>
        <totalobjects>4</totalobjects>
        <docs>
            <doc>
                <field name="City">
                    <value>Moscow</value>
                </field>
                <field name="Country">Russia1</field>
                <field name="_ID">2001</field>
                <field name="_shard">shard</field>
                <field name="SV">
                    <doc>
                        <field name="City">Moscow</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2014-01-01 00:00:00</field>
                        <field name="Double">2200.0</field>
                        <field name="Float">3300.0</field>
                        <field name="IsTested">True</field>
                        <field name="People">2014</field>
                        <field name="_ID">2001</field>
                    </doc>
                    <doc>
                        <field name="City">Saint-Petersburg</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2014-01-01 00:00:00</field>
                        <field name="Double">2200.0</field>
                        <field name="Float">3300.0</field>
                        <field name="IsTested">True</field>
                        <field name="People">2014</field>
                        <field name="_ID">2002</field>
                    </doc>
                    <doc>
                        <field name="City">Tver</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2014-01-01 00:00:00</field>
                        <field name="Double">2200.0</field>
                        <field name="Float">3300.0</field>
                        <field name="IsTested">True</field>
                        <field name="People">2014</field>
                        <field name="_ID">2003</field>
                    </doc>
                    <doc>
                        <field name="City">Pskov</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2014-01-01 00:00:00</field>
                        <field name="Double">2200.0</field>
                        <field name="Float">3300.0</field>
                        <field name="IsTested">True</field>
                        <field name="People">2014</field>
                        <field name="_ID">2004</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">
                    <value>Moscow</value>
                    <value>Tver</value>
                </field>
                <field name="Country">Russia2</field>
                <field name="_ID">2002</field>
                <field name="_shard">shard</field>
                <field name="SV">
                    <doc>
                        <field name="City">Minsk</field>
                        <field name="Country">Belorussia</field>
                        <field name="CreateDate">2013-01-01 00:00:00</field>
                        <field name="Double">5.555</field>
                        <field name="Float">4.443999767303467</field>
                        <field name="IsTested">False</field>
                        <field name="People">2013</field>
                        <field name="_ID">2005</field>
                    </doc>
                    <doc>
                        <field name="City">Bryansk</field>
                        <field name="Country">Belorussia</field>
                        <field name="CreateDate">2013-01-01 00:00:00</field>
                        <field name="Double">5.555</field>
                        <field name="Float">4.443999767303467</field>
                        <field name="IsTested">False</field>
                        <field name="People">2013</field>
                        <field name="_ID">2006</field>
                    </doc>
                    <doc>
                        <field name="City">Brest</field>
                        <field name="Country">Belorussia</field>
                        <field name="CreateDate">2013-01-01 00:00:00</field>
                        <field name="Double">5.555</field>
                        <field name="Float">4.443999767303467</field>
                        <field name="IsTested">False</field>
                        <field name="People">2013</field>
                        <field name="_ID">2007</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">
                    <value>Moscow</value>
                    <value>Pskov</value>
                    <value>Tver</value>
                </field>
                <field name="Country">Russia3</field>
                <field name="_ID">2003</field>
                <field name="_shard">shard</field>
                <field name="SV">
                    <doc>
                        <field name="City">Lugansk</field>
                        <field name="Country">Ukraine</field>
                        <field name="CreateDate">2012-01-01 00:00:00</field>
                        <field name="Double">-7.777</field>
                        <field name="Float">-6.665999889373779</field>
                        <field name="IsTested">True</field>
                        <field name="People">2012</field>
                        <field name="_ID">2008</field>
                    </doc>
                    <doc>
                        <field name="City">Gorlovka</field>
                        <field name="Country">Ukraine</field>
                        <field name="CreateDate">2012-01-01 00:00:00</field>
                        <field name="Double">-7.777</field>
                        <field name="Float">-6.665999889373779</field>
                        <field name="IsTested">True</field>
                        <field name="People">2012</field>
                        <field name="_ID">2009</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">
                    <value>Moscow</value>
                    <value>Pavlovsk</value>
                    <value>Pskov</value>
                    <value>Tver</value>
                </field>
                <field name="Country">Russia4</field>
                <field name="_ID">2004</field>
                <field name="_shard">shard</field>
                <field name="SV">
                    <doc>
                        <field name="City">Pavlodar</field>
                        <field name="Country">Kazakhstan</field>
                        <field name="CreateDate">2011-01-01 00:00:00</field>
                        <field name="Double">-0.099</field>
                        <field name="Float">-0.08799999952316284</field>
                        <field name="IsTested">False</field>
                        <field name="People">2011</field>
                        <field name="_ID">2010</field>
                    </doc>
                </field>
            </doc>
        </docs>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "totalobjects":"4",
          "docs":[
             {
                "doc":{
                   "City":[
                      "Moscow"
                   ],
                   "Country":"Russia1",
                   "_ID":"2001",
                   "_shard":"shard",
                   "SV":[
                      {
                         "doc":{
                            "City":"Moscow",
                            "Country":"Russia",
                            "CreateDate":"2014-01-01 00:00:00",
                            "Double":"2200.0",
                            "Float":"3300.0",
                            "IsTested":"True",
                            "People":"2014",
                            "_ID":"2001"
                         }
                      },
                      {
                         "doc":{
                            "City":"Saint-Petersburg",
                            "Country":"Russia",
                            "CreateDate":"2014-01-01 00:00:00",
                            "Double":"2200.0",
                            "Float":"3300.0",
                            "IsTested":"True",
                            "People":"2014",
                            "_ID":"2002"
                         }
                      },
                      {
                         "doc":{
                            "City":"Tver",
                            "Country":"Russia",
                            "CreateDate":"2014-01-01 00:00:00",
                            "Double":"2200.0",
                            "Float":"3300.0",
                            "IsTested":"True",
                            "People":"2014",
                            "_ID":"2003"
                         }
                      },
                      {
                         "doc":{
                            "City":"Pskov",
                            "Country":"Russia",
                            "CreateDate":"2014-01-01 00:00:00",
                            "Double":"2200.0",
                            "Float":"3300.0",
                            "IsTested":"True",
                            "People":"2014",
                            "_ID":"2004"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":[
                      "Moscow",
                      "Tver"
                   ],
                   "Country":"Russia2",
                   "_ID":"2002",
                   "_shard":"shard",
                   "SV":[
                      {
                         "doc":{
                            "City":"Minsk",
                            "Country":"Belorussia",
                            "CreateDate":"2013-01-01 00:00:00",
                            "Double":"5.555",
                            "Float":"4.443999767303467",
                            "IsTested":"False",
                            "People":"2013",
                            "_ID":"2005"
                         }
                      },
                      {
                         "doc":{
                            "City":"Bryansk",
                            "Country":"Belorussia",
                            "CreateDate":"2013-01-01 00:00:00",
                            "Double":"5.555",
                            "Float":"4.443999767303467",
                            "IsTested":"False",
                            "People":"2013",
                            "_ID":"2006"
                         }
                      },
                      {
                         "doc":{
                            "City":"Brest",
                            "Country":"Belorussia",
                            "CreateDate":"2013-01-01 00:00:00",
                            "Double":"5.555",
                            "Float":"4.443999767303467",
                            "IsTested":"False",
                            "People":"2013",
                            "_ID":"2007"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":[
                      "Moscow",
                      "Pskov",
                      "Tver"
                   ],
                   "Country":"Russia3",
                   "_ID":"2003",
                   "_shard":"shard",
                   "SV":[
                      {
                         "doc":{
                            "City":"Lugansk",
                            "Country":"Ukraine",
                            "CreateDate":"2012-01-01 00:00:00",
                            "Double":"-7.777",
                            "Float":"-6.665999889373779",
                            "IsTested":"True",
                            "People":"2012",
                            "_ID":"2008"
                         }
                      },
                      {
                         "doc":{
                            "City":"Gorlovka",
                            "Country":"Ukraine",
                            "CreateDate":"2012-01-01 00:00:00",
                            "Double":"-7.777",
                            "Float":"-6.665999889373779",
                            "IsTested":"True",
                            "People":"2012",
                            "_ID":"2009"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":[
                      "Moscow",
                      "Pavlovsk",
                      "Pskov",
                      "Tver"
                   ],
                   "Country":"Russia4",
                   "_ID":"2004",
                   "_shard":"shard",
                   "SV":[
                      {
                         "doc":{
                            "City":"Pavlodar",
                            "Country":"Kazakhstan",
                            "CreateDate":"2011-01-01 00:00:00",
                            "Double":"-0.099",
                            "Float":"-0.08799999952316284",
                            "IsTested":"False",
                            "People":"2011",
                            "_ID":"2010"
                         }
                      }
                   ]
                }
             }
          ]
       }
    }

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~ Test for TOTAL GROUP for TOP and BOTTOM aggr queries ~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~
~ LINK ~
~~~~~~~~
*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(0, MV)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(0, MV)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="MV">2001</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="MV">2002</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="MV">2003</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="MV">2004</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(0, MV)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "MV":"2001"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "MV":"2002"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "MV":"2003"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "MV":"2004"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(1, MV)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(1, MV)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="MV">2001</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(1, MV)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "MV":"2001"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(10, MV)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(10, MV)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="MV">2001</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="MV">2002</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="MV">2003</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="MV">2004</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(10, MV)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "MV":"2001"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "MV":"2002"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "MV":"2003"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "MV":"2004"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(0, MV)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(0, MV)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="MV">2004</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="MV">2003</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="MV">2002</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="MV">2001</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(0, MV)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "MV":"2004"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "MV":"2003"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "MV":"2002"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "MV":"2001"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(1, MV)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(1, MV)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="MV">2004</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(1, MV)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "MV":"2004"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(10, MV)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(10, MV)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="MV">2004</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="MV">2003</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="MV">2002</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="MV">2001</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(10, MV)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "MV":"2004"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "MV":"2003"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "MV":"2002"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "MV":"2001"
                   }
                }
             }
          ]
       }
    }

~~~~~~~~~~~
~ BOOLEAN ~
~~~~~~~~~~~
*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(0, IsTested)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(0, IsTested)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>6</metric>
                <field name="IsTested">true</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="IsTested">false</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(0, IsTested)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"6",
                   "field":{
                      "IsTested":"true"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "IsTested":"false"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(1, IsTested)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(1, IsTested)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>6</metric>
                <field name="IsTested">true</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(1, IsTested)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"6",
                   "field":{
                      "IsTested":"true"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(10, IsTested)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(10, IsTested)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>6</metric>
                <field name="IsTested">true</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="IsTested">false</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(10, IsTested)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"6",
                   "field":{
                      "IsTested":"true"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "IsTested":"false"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(0, IsTested)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(0, IsTested)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="IsTested">false</field>
            </group>
            <group>
                <metric>6</metric>
                <field name="IsTested">true</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(0, IsTested)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "IsTested":"false"
                   }
                }
             },
             {
                "group":{
                   "metric":"6",
                   "field":{
                      "IsTested":"true"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(1, IsTested)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(1, IsTested)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="IsTested">false</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(1, IsTested)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "IsTested":"false"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(10, IsTested)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(10, IsTested)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="IsTested">false</field>
            </group>
            <group>
                <metric>6</metric>
                <field name="IsTested">true</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(10, IsTested)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "IsTested":"false"
                   }
                }
             },
             {
                "group":{
                   "metric":"6",
                   "field":{
                      "IsTested":"true"
                   }
                }
             }
          ]
       }
    }

~~~~~~~~~
~ FLOAT ~
~~~~~~~~~
*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(0, Float)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(0, Float)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="Float">3300</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Float">4.443999767</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Float">-6.665999889</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="Float">-0.088</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(0, Float)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Float":"3300"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Float":"4.443999767"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Float":"-6.665999889"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Float":"-0.088"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(1, Float)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(1, Float)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="Float">3300</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(1, Float)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Float":"3300"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(10, Float)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(10, Float)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="Float">3300</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Float">4.443999767</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Float">-6.665999889</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="Float">-0.088</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(10, Float)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Float":"3300"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Float":"4.443999767"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Float":"-6.665999889"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Float":"-0.088"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(0, Float)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(0, Float)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="Float">-0.088</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Float">-6.665999889</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Float">4.443999767</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="Float">3300</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(0, Float)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Float":"-0.088"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Float":"-6.665999889"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Float":"4.443999767"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Float":"3300"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(1, Float)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(1, Float)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="Float">-0.088</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(1, Float)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Float":"-0.088"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(10, Float)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(10, Float)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="Float">-0.088</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Float">-6.665999889</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Float">4.443999767</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="Float">3300</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(10, Float)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Float":"-0.088"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Float":"-6.665999889"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Float":"4.443999767"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Float":"3300"
                   }
                }
             }
          ]
       }
    }

~~~~~~~~~~
~ DOUBLE ~
~~~~~~~~~~
*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(0, Double)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(0, Double)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="Double">2200</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Double">5.555</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Double">-7.777</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="Double">-0.099</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(0, Double)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Double":"2200"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Double":"5.555"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Double":"-7.777"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Double":"-0.099"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(1, Double)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(1, Double)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="Double">2200</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(1, Double)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Double":"2200"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(10, Double)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(10, Double)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="Double">2200</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Double">5.555</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Double">-7.777</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="Double">-0.099</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(10, Double)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Double":"2200"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Double":"5.555"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Double":"-7.777"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Double":"-0.099"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(0, Double)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(0, Double)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="Double">-0.099</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Double">-7.777</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Double">5.555</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="Double">2200</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(0, Double)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Double":"-0.099"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Double":"-7.777"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Double":"5.555"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Double":"2200"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(1, Double)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(1, Double)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="Double">-0.099</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(1, Double)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Double":"-0.099"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(10, Double)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(10, Double)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="Double">-0.099</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Double">-7.777</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Double">5.555</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="Double">2200</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(10, Double)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Double":"-0.099"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Double":"-7.777"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Double":"5.555"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Double":"2200"
                   }
                }
             }
          ]
       }
    }

~~~~~~~~~~~
~ INTEGER ~
~~~~~~~~~~~
*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(0, People)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(0, People)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="People">2014</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="People">2013</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="People">2012</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="People">2011</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(0, People)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "People":"2014"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "People":"2013"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "People":"2012"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "People":"2011"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(1, People)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(1, People)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="People">2014</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(1, People)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "People":"2014"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(10, People)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(10, People)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="People">2014</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="People">2013</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="People">2012</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="People">2011</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(10, People)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "People":"2014"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "People":"2013"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "People":"2012"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "People":"2011"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(0, People)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(0, People)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="People">2011</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="People">2012</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="People">2013</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="People">2014</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(0, People)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "People":"2011"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "People":"2012"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "People":"2013"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "People":"2014"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(1, People)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(1, People)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="People">2011</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(1, People)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "People":"2011"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(10, People)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(10, People)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="People">2011</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="People">2012</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="People">2013</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="People">2014</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(10, People)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "People":"2011"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "People":"2012"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "People":"2013"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "People":"2014"
                   }
                }
             }
          ]
       }
    }

~~~~~~~~~~~~~
~ TIMESTAMP ~
~~~~~~~~~~~~~
*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(0, CreateDate)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(0, CreateDate)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="CreateDate">2014-01-01 00:00:00</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="CreateDate">2013-01-01 00:00:00</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="CreateDate">2012-01-01 00:00:00</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="CreateDate">2011-01-01 00:00:00</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(0, CreateDate)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "CreateDate":"2014-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "CreateDate":"2013-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "CreateDate":"2012-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "CreateDate":"2011-01-01 00:00:00"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(1, CreateDate)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(1, CreateDate)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="CreateDate">2014-01-01 00:00:00</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(1, CreateDate)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "CreateDate":"2014-01-01 00:00:00"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(10, CreateDate)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(10, CreateDate)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="CreateDate">2014-01-01 00:00:00</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="CreateDate">2013-01-01 00:00:00</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="CreateDate">2012-01-01 00:00:00</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="CreateDate">2011-01-01 00:00:00</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(10, CreateDate)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "CreateDate":"2014-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "CreateDate":"2013-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "CreateDate":"2012-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "CreateDate":"2011-01-01 00:00:00"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(0, CreateDate)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(0, CreateDate)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="CreateDate">2011-01-01 00:00:00</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="CreateDate">2012-01-01 00:00:00</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="CreateDate">2013-01-01 00:00:00</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="CreateDate">2014-01-01 00:00:00</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(0, CreateDate)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "CreateDate":"2011-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "CreateDate":"2012-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "CreateDate":"2013-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "CreateDate":"2014-01-01 00:00:00"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(1, CreateDate)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(1, CreateDate)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="CreateDate">2011-01-01 00:00:00</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(1, CreateDate)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "CreateDate":"2011-01-01 00:00:00"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(10, CreateDate)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(10, CreateDate)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="CreateDate">2011-01-01 00:00:00</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="CreateDate">2012-01-01 00:00:00</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="CreateDate">2013-01-01 00:00:00</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="CreateDate">2014-01-01 00:00:00</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(10, CreateDate)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "CreateDate":"2011-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "CreateDate":"2012-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "CreateDate":"2013-01-01 00:00:00"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "CreateDate":"2014-01-01 00:00:00"
                   }
                }
             }
          ]
       }
    }

~~~~~~
~ SV ~
~~~~~~
*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(0, Country)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(0, Country)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Country">Belorussia</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Country">Ukraine</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="Country">Kazakhstan</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(0, Country)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Country":"Belorussia"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Country":"Ukraine"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Country":"Kazakhstan"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(1, Country)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(1, Country)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="Country">Russia</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(1, Country)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Country":"Russia"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=TOP(10, Country)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(10, Country)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Country">Belorussia</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Country">Ukraine</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="Country">Kazakhstan</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"TOP(10, Country)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Country":"Belorussia"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Country":"Ukraine"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Country":"Kazakhstan"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(0, Country)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(0, Country)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="Country">Kazakhstan</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Country">Ukraine</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Country">Belorussia</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="Country">Russia</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(0, Country)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Country":"Kazakhstan"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Country":"Ukraine"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Country":"Belorussia"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Country":"Russia"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(1, Country)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(1, Country)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="Country">Kazakhstan</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(1, Country)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Country":"Kazakhstan"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/SV/_aggregate?m=COUNT(City)&f=BOTTOM(10, Country)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(10, Country)" metric="COUNT(City)" query="*"/>
        <totalobjects>10</totalobjects>
        <summary>10</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="Country">Kazakhstan</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Country">Ukraine</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Country">Belorussia</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="Country">Russia</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"BOTTOM(10, Country)"
          },
          "totalobjects":"10",
          "summary":"10",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Country":"Kazakhstan"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Country":"Ukraine"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Country":"Belorussia"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Country":"Russia"
                   }
                }
             }
          ]
       }
    }

~~~~~~
~ MV ~
~~~~~~
*** Request
    GET /Application/MV/_aggregate?m=COUNT(Country)&f=TOP(0, City)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(0, City)" metric="COUNT(Country)" query="*"/>
        <totalobjects>4</totalobjects>
        <summary>4</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="City">Moscow</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="City">Tver</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="City">Pskov</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="City">Pavlovsk</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(Country)",
             "query":"*",
             "group":"TOP(0, City)"
          },
          "totalobjects":"4",
          "summary":"4",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "City":"Moscow"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "City":"Tver"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "City":"Pskov"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "City":"Pavlovsk"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/MV/_aggregate?m=COUNT(Country)&f=TOP(1, City)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(1, City)" metric="COUNT(Country)" query="*"/>
        <totalobjects>4</totalobjects>
        <summary>4</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="City">Moscow</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(Country)",
             "query":"*",
             "group":"TOP(1, City)"
          },
          "totalobjects":"4",
          "summary":"4",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "City":"Moscow"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/MV/_aggregate?m=COUNT(Country)&f=TOP(10, City)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="TOP(10, City)" metric="COUNT(Country)" query="*"/>
        <totalobjects>4</totalobjects>
        <summary>4</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>4</metric>
                <field name="City">Moscow</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="City">Tver</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="City">Pskov</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="City">Pavlovsk</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(Country)",
             "query":"*",
             "group":"TOP(10, City)"
          },
          "totalobjects":"4",
          "summary":"4",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "City":"Moscow"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "City":"Tver"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "City":"Pskov"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "City":"Pavlovsk"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/MV/_aggregate?m=COUNT(Country)&f=BOTTOM(0, City)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(0, City)" metric="COUNT(Country)" query="*"/>
        <totalobjects>4</totalobjects>
        <summary>4</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="City">Pavlovsk</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="City">Pskov</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="City">Tver</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="City">Moscow</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(Country)",
             "query":"*",
             "group":"BOTTOM(0, City)"
          },
          "totalobjects":"4",
          "summary":"4",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "City":"Pavlovsk"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "City":"Pskov"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "City":"Tver"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "City":"Moscow"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/MV/_aggregate?m=COUNT(Country)&f=BOTTOM(1, City)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(1, City)" metric="COUNT(Country)" query="*"/>
        <totalobjects>4</totalobjects>
        <summary>4</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="City">Pavlovsk</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(Country)",
             "query":"*",
             "group":"BOTTOM(1, City)"
          },
          "totalobjects":"4",
          "summary":"4",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "City":"Pavlovsk"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/MV/_aggregate?m=COUNT(Country)&f=BOTTOM(10, City)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="BOTTOM(10, City)" metric="COUNT(Country)" query="*"/>
        <totalobjects>4</totalobjects>
        <summary>4</summary>
        <totalgroups>4</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="City">Pavlovsk</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="City">Pskov</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="City">Tver</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="City">Moscow</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(Country)",
             "query":"*",
             "group":"BOTTOM(10, City)"
          },
          "totalobjects":"4",
          "summary":"4",
          "totalgroups":"4",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "City":"Pavlovsk"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "City":"Pskov"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "City":"Tver"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "City":"Moscow"
                   }
                }
             }
          ]
       }
    }

*** Request
    DELETE /_applications/Application/ApplicationKey
*** Response: 
    200 OK

