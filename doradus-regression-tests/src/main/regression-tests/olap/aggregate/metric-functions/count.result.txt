~~~~~~~~~~~~~~
~ XML format ~
~~~~~~~~~~~~~~

~~~~~~~~~~~~~~~~~~~~~~
~ Create application ~
~~~~~~~~~~~~~~~~~~~~~~
*** Request
    POST /Application/_shards/shard
*** Response: 
    200 OK

~~~~~~~~~~~~~~~~~~~~
~ Table of Content ~
~~~~~~~~~~~~~~~~~~~~
*** Request
    GET /Application/Table/_query?q=*&f=_all&shards=shard
*** Response: xml
    200 OK
    <results>
        <totalobjects>5</totalobjects>
        <docs>
            <doc>
                <field name="City">Moscow</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2011-04-05 12:32:08</field>
                <field name="MV">
                    <value>One</value>
                    <value>Two</value>
                </field>
                <field name="People">11980000</field>
                <field name="_ID">2001</field>
                <field name="_shard">shard</field>
                <field name="Manager">
                    <doc>
                        <field name="Name">Name 1001</field>
                        <field name="_ID">1001</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Washington</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2011-04-05 22:12:14</field>
                <field name="MV">
                    <value>Four</value>
                    <value>Three</value>
                </field>
                <field name="People">632323</field>
                <field name="_ID">2002</field>
                <field name="_shard">shard</field>
                <field name="Manager">
                    <doc>
                        <field name="Name">Name 1001</field>
                        <field name="_ID">1001</field>
                    </doc>
                    <doc>
                        <field name="Name">Name 1002</field>
                        <field name="_ID">1002</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">New York</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2011-04-15 10:20:01</field>
                <field name="MV">
                    <value>Five</value>
                    <value>Six</value>
                </field>
                <field name="People">8245000</field>
                <field name="_ID">2003</field>
                <field name="_shard">shard</field>
                <field name="Manager">
                    <doc>
                        <field name="Name">Name 1001</field>
                        <field name="_ID">1001</field>
                    </doc>
                    <doc>
                        <field name="Name">Name 1002</field>
                        <field name="_ID">1002</field>
                    </doc>
                    <doc>
                        <field name="Name">Name 1003</field>
                        <field name="_ID">1003</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Saint-Petersburg</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2011-06-22 09:05:20</field>
                <field name="MV">
                    <value>Eight</value>
                    <value>Seven</value>
                </field>
                <field name="People">4880000</field>
                <field name="_ID">2004</field>
                <field name="_shard">shard</field>
                <field name="Manager">
                    <doc>
                        <field name="Name">Name 1001</field>
                        <field name="_ID">1001</field>
                    </doc>
                    <doc>
                        <field name="Name">Name 1002</field>
                        <field name="_ID">1002</field>
                    </doc>
                    <doc>
                        <field name="Name">Name 1003</field>
                        <field name="_ID">1003</field>
                    </doc>
                    <doc>
                        <field name="Name">Name 1004</field>
                        <field name="_ID">1004</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Novgorod</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2012-12-30 15:29:04</field>
                <field name="MV">
                    <value>Nine</value>
                    <value>Ten</value>
                </field>
                <field name="People">1255000</field>
                <field name="_ID">2005</field>
                <field name="_shard">shard</field>
                <field name="Manager">
                    <doc>
                        <field name="Name">Name 1001</field>
                        <field name="_ID">1001</field>
                    </doc>
                    <doc>
                        <field name="Name">Name 1002</field>
                        <field name="_ID">1002</field>
                    </doc>
                    <doc>
                        <field name="Name">Name 1003</field>
                        <field name="_ID">1003</field>
                    </doc>
                    <doc>
                        <field name="Name">Name 1004</field>
                        <field name="_ID">1004</field>
                    </doc>
                    <doc>
                        <field name="Name">Name 1005</field>
                        <field name="_ID">1005</field>
                    </doc>
                </field>
            </doc>
        </docs>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "totalobjects":"5",
          "docs":[
             {
                "doc":{
                   "City":"Moscow",
                   "Country":"Russia",
                   "CreateDate":"2011-04-05 12:32:08",
                   "MV":[
                      "One",
                      "Two"
                   ],
                   "People":"11980000",
                   "_ID":"2001",
                   "_shard":"shard",
                   "Manager":[
                      {
                         "doc":{
                            "Name":"Name 1001",
                            "_ID":"1001"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Washington",
                   "Country":"USA",
                   "CreateDate":"2011-04-05 22:12:14",
                   "MV":[
                      "Four",
                      "Three"
                   ],
                   "People":"632323",
                   "_ID":"2002",
                   "_shard":"shard",
                   "Manager":[
                      {
                         "doc":{
                            "Name":"Name 1001",
                            "_ID":"1001"
                         }
                      },
                      {
                         "doc":{
                            "Name":"Name 1002",
                            "_ID":"1002"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"New York",
                   "Country":"USA",
                   "CreateDate":"2011-04-15 10:20:01",
                   "MV":[
                      "Five",
                      "Six"
                   ],
                   "People":"8245000",
                   "_ID":"2003",
                   "_shard":"shard",
                   "Manager":[
                      {
                         "doc":{
                            "Name":"Name 1001",
                            "_ID":"1001"
                         }
                      },
                      {
                         "doc":{
                            "Name":"Name 1002",
                            "_ID":"1002"
                         }
                      },
                      {
                         "doc":{
                            "Name":"Name 1003",
                            "_ID":"1003"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Saint-Petersburg",
                   "Country":"Russia",
                   "CreateDate":"2011-06-22 09:05:20",
                   "MV":[
                      "Eight",
                      "Seven"
                   ],
                   "People":"4880000",
                   "_ID":"2004",
                   "_shard":"shard",
                   "Manager":[
                      {
                         "doc":{
                            "Name":"Name 1001",
                            "_ID":"1001"
                         }
                      },
                      {
                         "doc":{
                            "Name":"Name 1002",
                            "_ID":"1002"
                         }
                      },
                      {
                         "doc":{
                            "Name":"Name 1003",
                            "_ID":"1003"
                         }
                      },
                      {
                         "doc":{
                            "Name":"Name 1004",
                            "_ID":"1004"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Novgorod",
                   "Country":"Russia",
                   "CreateDate":"2012-12-30 15:29:04",
                   "MV":[
                      "Nine",
                      "Ten"
                   ],
                   "People":"1255000",
                   "_ID":"2005",
                   "_shard":"shard",
                   "Manager":[
                      {
                         "doc":{
                            "Name":"Name 1001",
                            "_ID":"1001"
                         }
                      },
                      {
                         "doc":{
                            "Name":"Name 1002",
                            "_ID":"1002"
                         }
                      },
                      {
                         "doc":{
                            "Name":"Name 1003",
                            "_ID":"1003"
                         }
                      },
                      {
                         "doc":{
                            "Name":"Name 1004",
                            "_ID":"1004"
                         }
                      },
                      {
                         "doc":{
                            "Name":"Name 1005",
                            "_ID":"1005"
                         }
                      }
                   ]
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table1/_query?q=*&f=_all&shards=shard
*** Response: xml
    200 OK
    <results>
        <totalobjects>5</totalobjects>
        <docs>
            <doc>
                <field name="Name">Name 1001</field>
                <field name="_ID">1001</field>
                <field name="_shard">shard</field>
                <field name="Report">
                    <doc>
                        <field name="City">Moscow</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2011-04-05 12:32:08</field>
                        <field name="MV">
                            <value>One</value>
                            <value>Two</value>
                        </field>
                        <field name="People">11980000</field>
                        <field name="_ID">2001</field>
                    </doc>
                    <doc>
                        <field name="City">Washington</field>
                        <field name="Country">USA</field>
                        <field name="CreateDate">2011-04-05 22:12:14</field>
                        <field name="MV">
                            <value>Four</value>
                            <value>Three</value>
                        </field>
                        <field name="People">632323</field>
                        <field name="_ID">2002</field>
                    </doc>
                    <doc>
                        <field name="City">New York</field>
                        <field name="Country">USA</field>
                        <field name="CreateDate">2011-04-15 10:20:01</field>
                        <field name="MV">
                            <value>Five</value>
                            <value>Six</value>
                        </field>
                        <field name="People">8245000</field>
                        <field name="_ID">2003</field>
                    </doc>
                    <doc>
                        <field name="City">Saint-Petersburg</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2011-06-22 09:05:20</field>
                        <field name="MV">
                            <value>Eight</value>
                            <value>Seven</value>
                        </field>
                        <field name="People">4880000</field>
                        <field name="_ID">2004</field>
                    </doc>
                    <doc>
                        <field name="City">Novgorod</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2012-12-30 15:29:04</field>
                        <field name="MV">
                            <value>Nine</value>
                            <value>Ten</value>
                        </field>
                        <field name="People">1255000</field>
                        <field name="_ID">2005</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="Name">Name 1002</field>
                <field name="_ID">1002</field>
                <field name="_shard">shard</field>
                <field name="Report">
                    <doc>
                        <field name="City">Washington</field>
                        <field name="Country">USA</field>
                        <field name="CreateDate">2011-04-05 22:12:14</field>
                        <field name="MV">
                            <value>Four</value>
                            <value>Three</value>
                        </field>
                        <field name="People">632323</field>
                        <field name="_ID">2002</field>
                    </doc>
                    <doc>
                        <field name="City">New York</field>
                        <field name="Country">USA</field>
                        <field name="CreateDate">2011-04-15 10:20:01</field>
                        <field name="MV">
                            <value>Five</value>
                            <value>Six</value>
                        </field>
                        <field name="People">8245000</field>
                        <field name="_ID">2003</field>
                    </doc>
                    <doc>
                        <field name="City">Saint-Petersburg</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2011-06-22 09:05:20</field>
                        <field name="MV">
                            <value>Eight</value>
                            <value>Seven</value>
                        </field>
                        <field name="People">4880000</field>
                        <field name="_ID">2004</field>
                    </doc>
                    <doc>
                        <field name="City">Novgorod</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2012-12-30 15:29:04</field>
                        <field name="MV">
                            <value>Nine</value>
                            <value>Ten</value>
                        </field>
                        <field name="People">1255000</field>
                        <field name="_ID">2005</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="Name">Name 1003</field>
                <field name="_ID">1003</field>
                <field name="_shard">shard</field>
                <field name="Report">
                    <doc>
                        <field name="City">New York</field>
                        <field name="Country">USA</field>
                        <field name="CreateDate">2011-04-15 10:20:01</field>
                        <field name="MV">
                            <value>Five</value>
                            <value>Six</value>
                        </field>
                        <field name="People">8245000</field>
                        <field name="_ID">2003</field>
                    </doc>
                    <doc>
                        <field name="City">Saint-Petersburg</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2011-06-22 09:05:20</field>
                        <field name="MV">
                            <value>Eight</value>
                            <value>Seven</value>
                        </field>
                        <field name="People">4880000</field>
                        <field name="_ID">2004</field>
                    </doc>
                    <doc>
                        <field name="City">Novgorod</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2012-12-30 15:29:04</field>
                        <field name="MV">
                            <value>Nine</value>
                            <value>Ten</value>
                        </field>
                        <field name="People">1255000</field>
                        <field name="_ID">2005</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="Name">Name 1004</field>
                <field name="_ID">1004</field>
                <field name="_shard">shard</field>
                <field name="Report">
                    <doc>
                        <field name="City">Saint-Petersburg</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2011-06-22 09:05:20</field>
                        <field name="MV">
                            <value>Eight</value>
                            <value>Seven</value>
                        </field>
                        <field name="People">4880000</field>
                        <field name="_ID">2004</field>
                    </doc>
                    <doc>
                        <field name="City">Novgorod</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2012-12-30 15:29:04</field>
                        <field name="MV">
                            <value>Nine</value>
                            <value>Ten</value>
                        </field>
                        <field name="People">1255000</field>
                        <field name="_ID">2005</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="Name">Name 1005</field>
                <field name="_ID">1005</field>
                <field name="_shard">shard</field>
                <field name="Report">
                    <doc>
                        <field name="City">Novgorod</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2012-12-30 15:29:04</field>
                        <field name="MV">
                            <value>Nine</value>
                            <value>Ten</value>
                        </field>
                        <field name="People">1255000</field>
                        <field name="_ID">2005</field>
                    </doc>
                </field>
            </doc>
        </docs>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "totalobjects":"5",
          "docs":[
             {
                "doc":{
                   "Name":"Name 1001",
                   "_ID":"1001",
                   "_shard":"shard",
                   "Report":[
                      {
                         "doc":{
                            "City":"Moscow",
                            "Country":"Russia",
                            "CreateDate":"2011-04-05 12:32:08",
                            "MV":[
                               "One",
                               "Two"
                            ],
                            "People":"11980000",
                            "_ID":"2001"
                         }
                      },
                      {
                         "doc":{
                            "City":"Washington",
                            "Country":"USA",
                            "CreateDate":"2011-04-05 22:12:14",
                            "MV":[
                               "Four",
                               "Three"
                            ],
                            "People":"632323",
                            "_ID":"2002"
                         }
                      },
                      {
                         "doc":{
                            "City":"New York",
                            "Country":"USA",
                            "CreateDate":"2011-04-15 10:20:01",
                            "MV":[
                               "Five",
                               "Six"
                            ],
                            "People":"8245000",
                            "_ID":"2003"
                         }
                      },
                      {
                         "doc":{
                            "City":"Saint-Petersburg",
                            "Country":"Russia",
                            "CreateDate":"2011-06-22 09:05:20",
                            "MV":[
                               "Eight",
                               "Seven"
                            ],
                            "People":"4880000",
                            "_ID":"2004"
                         }
                      },
                      {
                         "doc":{
                            "City":"Novgorod",
                            "Country":"Russia",
                            "CreateDate":"2012-12-30 15:29:04",
                            "MV":[
                               "Nine",
                               "Ten"
                            ],
                            "People":"1255000",
                            "_ID":"2005"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "Name":"Name 1002",
                   "_ID":"1002",
                   "_shard":"shard",
                   "Report":[
                      {
                         "doc":{
                            "City":"Washington",
                            "Country":"USA",
                            "CreateDate":"2011-04-05 22:12:14",
                            "MV":[
                               "Four",
                               "Three"
                            ],
                            "People":"632323",
                            "_ID":"2002"
                         }
                      },
                      {
                         "doc":{
                            "City":"New York",
                            "Country":"USA",
                            "CreateDate":"2011-04-15 10:20:01",
                            "MV":[
                               "Five",
                               "Six"
                            ],
                            "People":"8245000",
                            "_ID":"2003"
                         }
                      },
                      {
                         "doc":{
                            "City":"Saint-Petersburg",
                            "Country":"Russia",
                            "CreateDate":"2011-06-22 09:05:20",
                            "MV":[
                               "Eight",
                               "Seven"
                            ],
                            "People":"4880000",
                            "_ID":"2004"
                         }
                      },
                      {
                         "doc":{
                            "City":"Novgorod",
                            "Country":"Russia",
                            "CreateDate":"2012-12-30 15:29:04",
                            "MV":[
                               "Nine",
                               "Ten"
                            ],
                            "People":"1255000",
                            "_ID":"2005"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "Name":"Name 1003",
                   "_ID":"1003",
                   "_shard":"shard",
                   "Report":[
                      {
                         "doc":{
                            "City":"New York",
                            "Country":"USA",
                            "CreateDate":"2011-04-15 10:20:01",
                            "MV":[
                               "Five",
                               "Six"
                            ],
                            "People":"8245000",
                            "_ID":"2003"
                         }
                      },
                      {
                         "doc":{
                            "City":"Saint-Petersburg",
                            "Country":"Russia",
                            "CreateDate":"2011-06-22 09:05:20",
                            "MV":[
                               "Eight",
                               "Seven"
                            ],
                            "People":"4880000",
                            "_ID":"2004"
                         }
                      },
                      {
                         "doc":{
                            "City":"Novgorod",
                            "Country":"Russia",
                            "CreateDate":"2012-12-30 15:29:04",
                            "MV":[
                               "Nine",
                               "Ten"
                            ],
                            "People":"1255000",
                            "_ID":"2005"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "Name":"Name 1004",
                   "_ID":"1004",
                   "_shard":"shard",
                   "Report":[
                      {
                         "doc":{
                            "City":"Saint-Petersburg",
                            "Country":"Russia",
                            "CreateDate":"2011-06-22 09:05:20",
                            "MV":[
                               "Eight",
                               "Seven"
                            ],
                            "People":"4880000",
                            "_ID":"2004"
                         }
                      },
                      {
                         "doc":{
                            "City":"Novgorod",
                            "Country":"Russia",
                            "CreateDate":"2012-12-30 15:29:04",
                            "MV":[
                               "Nine",
                               "Ten"
                            ],
                            "People":"1255000",
                            "_ID":"2005"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "Name":"Name 1005",
                   "_ID":"1005",
                   "_shard":"shard",
                   "Report":[
                      {
                         "doc":{
                            "City":"Novgorod",
                            "Country":"Russia",
                            "CreateDate":"2012-12-30 15:29:04",
                            "MV":[
                               "Nine",
                               "Ten"
                            ],
                            "People":"1255000",
                            "_ID":"2005"
                         }
                      }
                   ]
                }
             }
          ]
       }
    }

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~   Test for Aggregates: COUNT ~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~
~ INTEGER ~
~~~~~~~~~~~
*** Request
    GET /Application/Table/_aggregate?m=COUNT(People)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="COUNT(People)" query="*"/>
        <totalobjects>5</totalobjects>
        <summary>5</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>3</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(People)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"5",
          "summary":"5",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=COUNT(People)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate metric="COUNT(People)" query="*"/>
        <totalobjects>5</totalobjects>
        <value>5</value>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(People)",
             "query":"*"
          },
          "totalobjects":"5",
          "value":"5"
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=COUNT(*)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate metric="COUNT(*)" query="*"/>
        <totalobjects>5</totalobjects>
        <value>5</value>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(*)",
             "query":"*"
          },
          "totalobjects":"5",
          "value":"5"
       }
    }

~~~~~~~~~~~~~
~ TIMESTAMP ~
~~~~~~~~~~~~~
*** Request
    GET /Application/Table/_aggregate?m=COUNT(CreateDate)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="COUNT(CreateDate)" query="*"/>
        <totalobjects>5</totalobjects>
        <summary>5</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>3</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(CreateDate)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"5",
          "summary":"5",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=COUNT(CreateDate)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate metric="COUNT(CreateDate)" query="*"/>
        <totalobjects>5</totalobjects>
        <value>5</value>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(CreateDate)",
             "query":"*"
          },
          "totalobjects":"5",
          "value":"5"
       }
    }

~~~~~~~~~~~~~
~ STRING SV ~
~~~~~~~~~~~~~
*** Request
    GET /Application/Table/_aggregate?m=COUNT(City)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="COUNT(City)" query="*"/>
        <totalobjects>5</totalobjects>
        <summary>5</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>3</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"5",
          "summary":"5",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=COUNT(Country)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate metric="COUNT(Country)" query="*"/>
        <totalobjects>5</totalobjects>
        <value>5</value>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(Country)",
             "query":"*"
          },
          "totalobjects":"5",
          "value":"5"
       }
    }

~~~~~~~~~~~~~
~ STRING MV ~
~~~~~~~~~~~~~
*** Request
    GET /Application/Table/_aggregate?m=COUNT(MV)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="COUNT(MV)" query="*"/>
        <totalobjects>5</totalobjects>
        <summary>10</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>6</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(MV)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"5",
          "summary":"10",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"6",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=COUNT(MV)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate metric="COUNT(MV)" query="*"/>
        <totalobjects>5</totalobjects>
        <value>10</value>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(MV)",
             "query":"*"
          },
          "totalobjects":"5",
          "value":"10"
       }
    }

~~~~~~~~
~ LINK ~
~~~~~~~~
*** Request
    GET /Application/Table/_aggregate?m=COUNT(Manager)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="COUNT(Manager)" query="*"/>
        <totalobjects>5</totalobjects>
        <summary>15</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>10</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>5</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(Manager)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"5",
          "summary":"15",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"10",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"5",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table1/_aggregate?m=COUNT(Report)&f=Name&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Name" metric="COUNT(Report)" query="*"/>
        <totalobjects>5</totalobjects>
        <summary>15</summary>
        <totalgroups>5</totalgroups>
        <groups>
            <group>
                <metric>5</metric>
                <field name="Name">Name 1001</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="Name">Name 1002</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Name">Name 1003</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Name">Name 1004</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="Name">Name 1005</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(Report)",
             "query":"*",
             "group":"Name"
          },
          "totalobjects":"5",
          "summary":"15",
          "totalgroups":"5",
          "groups":[
             {
                "group":{
                   "metric":"5",
                   "field":{
                      "Name":"Name 1001"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Name":"Name 1002"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Name":"Name 1003"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Name":"Name 1004"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Name":"Name 1005"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=MINCOUNT(Manager)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="MINCOUNT(Manager)" query="*"/>
        <totalobjects>5</totalobjects>
        <summary>1</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"MINCOUNT(Manager)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"5",
          "summary":"1",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=MAXCOUNT(Manager)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="MAXCOUNT(Manager)" query="*"/>
        <totalobjects>5</totalobjects>
        <summary>5</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>5</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"MAXCOUNT(Manager)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"5",
          "summary":"5",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"5",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    DELETE /_applications/Application/ApplicationKey
*** Response: 
    200 OK

~~~~~~~~~~~~~~~
~ JSON format ~
~~~~~~~~~~~~~~~

~~~~~~~~~~~~~~~~~~~~~~
~ Create application ~
~~~~~~~~~~~~~~~~~~~~~~
*** Request
    POST /Application/_shards/shard
*** Response: 
    200 OK

~~~~~~~~~~~~~~~~~~~~
~ Table of Content ~
~~~~~~~~~~~~~~~~~~~~
*** Request
    GET /Application/Table/_query?q=*&f=_all&shards=shard
*** Response: xml
    200 OK
    <results>
        <totalobjects>5</totalobjects>
        <docs>
            <doc>
                <field name="City">Moscow</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2011-04-05 12:32:08</field>
                <field name="MV">
                    <value>One</value>
                    <value>Two</value>
                </field>
                <field name="People">11980000</field>
                <field name="_ID">2001</field>
                <field name="_shard">shard</field>
                <field name="Manager">
                    <doc>
                        <field name="Name">Name 1001</field>
                        <field name="_ID">1001</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Washington</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2011-04-05 22:12:14</field>
                <field name="MV">
                    <value>Four</value>
                    <value>Three</value>
                </field>
                <field name="People">632323</field>
                <field name="_ID">2002</field>
                <field name="_shard">shard</field>
                <field name="Manager">
                    <doc>
                        <field name="Name">Name 1001</field>
                        <field name="_ID">1001</field>
                    </doc>
                    <doc>
                        <field name="Name">Name 1002</field>
                        <field name="_ID">1002</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">New York</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2011-04-15 10:20:01</field>
                <field name="MV">
                    <value>Five</value>
                    <value>Six</value>
                </field>
                <field name="People">8245000</field>
                <field name="_ID">2003</field>
                <field name="_shard">shard</field>
                <field name="Manager">
                    <doc>
                        <field name="Name">Name 1001</field>
                        <field name="_ID">1001</field>
                    </doc>
                    <doc>
                        <field name="Name">Name 1002</field>
                        <field name="_ID">1002</field>
                    </doc>
                    <doc>
                        <field name="Name">Name 1003</field>
                        <field name="_ID">1003</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Saint-Petersburg</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2011-06-22 09:05:20</field>
                <field name="MV">
                    <value>Eight</value>
                    <value>Seven</value>
                </field>
                <field name="People">4880000</field>
                <field name="_ID">2004</field>
                <field name="_shard">shard</field>
                <field name="Manager">
                    <doc>
                        <field name="Name">Name 1001</field>
                        <field name="_ID">1001</field>
                    </doc>
                    <doc>
                        <field name="Name">Name 1002</field>
                        <field name="_ID">1002</field>
                    </doc>
                    <doc>
                        <field name="Name">Name 1003</field>
                        <field name="_ID">1003</field>
                    </doc>
                    <doc>
                        <field name="Name">Name 1004</field>
                        <field name="_ID">1004</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="City">Novgorod</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2012-12-30 15:29:04</field>
                <field name="MV">
                    <value>Nine</value>
                    <value>Ten</value>
                </field>
                <field name="People">1255000</field>
                <field name="_ID">2005</field>
                <field name="_shard">shard</field>
                <field name="Manager">
                    <doc>
                        <field name="Name">Name 1001</field>
                        <field name="_ID">1001</field>
                    </doc>
                    <doc>
                        <field name="Name">Name 1002</field>
                        <field name="_ID">1002</field>
                    </doc>
                    <doc>
                        <field name="Name">Name 1003</field>
                        <field name="_ID">1003</field>
                    </doc>
                    <doc>
                        <field name="Name">Name 1004</field>
                        <field name="_ID">1004</field>
                    </doc>
                    <doc>
                        <field name="Name">Name 1005</field>
                        <field name="_ID">1005</field>
                    </doc>
                </field>
            </doc>
        </docs>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "totalobjects":"5",
          "docs":[
             {
                "doc":{
                   "City":"Moscow",
                   "Country":"Russia",
                   "CreateDate":"2011-04-05 12:32:08",
                   "MV":[
                      "One",
                      "Two"
                   ],
                   "People":"11980000",
                   "_ID":"2001",
                   "_shard":"shard",
                   "Manager":[
                      {
                         "doc":{
                            "Name":"Name 1001",
                            "_ID":"1001"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Washington",
                   "Country":"USA",
                   "CreateDate":"2011-04-05 22:12:14",
                   "MV":[
                      "Four",
                      "Three"
                   ],
                   "People":"632323",
                   "_ID":"2002",
                   "_shard":"shard",
                   "Manager":[
                      {
                         "doc":{
                            "Name":"Name 1001",
                            "_ID":"1001"
                         }
                      },
                      {
                         "doc":{
                            "Name":"Name 1002",
                            "_ID":"1002"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"New York",
                   "Country":"USA",
                   "CreateDate":"2011-04-15 10:20:01",
                   "MV":[
                      "Five",
                      "Six"
                   ],
                   "People":"8245000",
                   "_ID":"2003",
                   "_shard":"shard",
                   "Manager":[
                      {
                         "doc":{
                            "Name":"Name 1001",
                            "_ID":"1001"
                         }
                      },
                      {
                         "doc":{
                            "Name":"Name 1002",
                            "_ID":"1002"
                         }
                      },
                      {
                         "doc":{
                            "Name":"Name 1003",
                            "_ID":"1003"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Saint-Petersburg",
                   "Country":"Russia",
                   "CreateDate":"2011-06-22 09:05:20",
                   "MV":[
                      "Eight",
                      "Seven"
                   ],
                   "People":"4880000",
                   "_ID":"2004",
                   "_shard":"shard",
                   "Manager":[
                      {
                         "doc":{
                            "Name":"Name 1001",
                            "_ID":"1001"
                         }
                      },
                      {
                         "doc":{
                            "Name":"Name 1002",
                            "_ID":"1002"
                         }
                      },
                      {
                         "doc":{
                            "Name":"Name 1003",
                            "_ID":"1003"
                         }
                      },
                      {
                         "doc":{
                            "Name":"Name 1004",
                            "_ID":"1004"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "City":"Novgorod",
                   "Country":"Russia",
                   "CreateDate":"2012-12-30 15:29:04",
                   "MV":[
                      "Nine",
                      "Ten"
                   ],
                   "People":"1255000",
                   "_ID":"2005",
                   "_shard":"shard",
                   "Manager":[
                      {
                         "doc":{
                            "Name":"Name 1001",
                            "_ID":"1001"
                         }
                      },
                      {
                         "doc":{
                            "Name":"Name 1002",
                            "_ID":"1002"
                         }
                      },
                      {
                         "doc":{
                            "Name":"Name 1003",
                            "_ID":"1003"
                         }
                      },
                      {
                         "doc":{
                            "Name":"Name 1004",
                            "_ID":"1004"
                         }
                      },
                      {
                         "doc":{
                            "Name":"Name 1005",
                            "_ID":"1005"
                         }
                      }
                   ]
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table1/_query?q=*&f=_all&shards=shard
*** Response: xml
    200 OK
    <results>
        <totalobjects>5</totalobjects>
        <docs>
            <doc>
                <field name="Name">Name 1001</field>
                <field name="_ID">1001</field>
                <field name="_shard">shard</field>
                <field name="Report">
                    <doc>
                        <field name="City">Moscow</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2011-04-05 12:32:08</field>
                        <field name="MV">
                            <value>One</value>
                            <value>Two</value>
                        </field>
                        <field name="People">11980000</field>
                        <field name="_ID">2001</field>
                    </doc>
                    <doc>
                        <field name="City">Washington</field>
                        <field name="Country">USA</field>
                        <field name="CreateDate">2011-04-05 22:12:14</field>
                        <field name="MV">
                            <value>Four</value>
                            <value>Three</value>
                        </field>
                        <field name="People">632323</field>
                        <field name="_ID">2002</field>
                    </doc>
                    <doc>
                        <field name="City">New York</field>
                        <field name="Country">USA</field>
                        <field name="CreateDate">2011-04-15 10:20:01</field>
                        <field name="MV">
                            <value>Five</value>
                            <value>Six</value>
                        </field>
                        <field name="People">8245000</field>
                        <field name="_ID">2003</field>
                    </doc>
                    <doc>
                        <field name="City">Saint-Petersburg</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2011-06-22 09:05:20</field>
                        <field name="MV">
                            <value>Eight</value>
                            <value>Seven</value>
                        </field>
                        <field name="People">4880000</field>
                        <field name="_ID">2004</field>
                    </doc>
                    <doc>
                        <field name="City">Novgorod</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2012-12-30 15:29:04</field>
                        <field name="MV">
                            <value>Nine</value>
                            <value>Ten</value>
                        </field>
                        <field name="People">1255000</field>
                        <field name="_ID">2005</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="Name">Name 1002</field>
                <field name="_ID">1002</field>
                <field name="_shard">shard</field>
                <field name="Report">
                    <doc>
                        <field name="City">Washington</field>
                        <field name="Country">USA</field>
                        <field name="CreateDate">2011-04-05 22:12:14</field>
                        <field name="MV">
                            <value>Four</value>
                            <value>Three</value>
                        </field>
                        <field name="People">632323</field>
                        <field name="_ID">2002</field>
                    </doc>
                    <doc>
                        <field name="City">New York</field>
                        <field name="Country">USA</field>
                        <field name="CreateDate">2011-04-15 10:20:01</field>
                        <field name="MV">
                            <value>Five</value>
                            <value>Six</value>
                        </field>
                        <field name="People">8245000</field>
                        <field name="_ID">2003</field>
                    </doc>
                    <doc>
                        <field name="City">Saint-Petersburg</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2011-06-22 09:05:20</field>
                        <field name="MV">
                            <value>Eight</value>
                            <value>Seven</value>
                        </field>
                        <field name="People">4880000</field>
                        <field name="_ID">2004</field>
                    </doc>
                    <doc>
                        <field name="City">Novgorod</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2012-12-30 15:29:04</field>
                        <field name="MV">
                            <value>Nine</value>
                            <value>Ten</value>
                        </field>
                        <field name="People">1255000</field>
                        <field name="_ID">2005</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="Name">Name 1003</field>
                <field name="_ID">1003</field>
                <field name="_shard">shard</field>
                <field name="Report">
                    <doc>
                        <field name="City">New York</field>
                        <field name="Country">USA</field>
                        <field name="CreateDate">2011-04-15 10:20:01</field>
                        <field name="MV">
                            <value>Five</value>
                            <value>Six</value>
                        </field>
                        <field name="People">8245000</field>
                        <field name="_ID">2003</field>
                    </doc>
                    <doc>
                        <field name="City">Saint-Petersburg</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2011-06-22 09:05:20</field>
                        <field name="MV">
                            <value>Eight</value>
                            <value>Seven</value>
                        </field>
                        <field name="People">4880000</field>
                        <field name="_ID">2004</field>
                    </doc>
                    <doc>
                        <field name="City">Novgorod</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2012-12-30 15:29:04</field>
                        <field name="MV">
                            <value>Nine</value>
                            <value>Ten</value>
                        </field>
                        <field name="People">1255000</field>
                        <field name="_ID">2005</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="Name">Name 1004</field>
                <field name="_ID">1004</field>
                <field name="_shard">shard</field>
                <field name="Report">
                    <doc>
                        <field name="City">Saint-Petersburg</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2011-06-22 09:05:20</field>
                        <field name="MV">
                            <value>Eight</value>
                            <value>Seven</value>
                        </field>
                        <field name="People">4880000</field>
                        <field name="_ID">2004</field>
                    </doc>
                    <doc>
                        <field name="City">Novgorod</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2012-12-30 15:29:04</field>
                        <field name="MV">
                            <value>Nine</value>
                            <value>Ten</value>
                        </field>
                        <field name="People">1255000</field>
                        <field name="_ID">2005</field>
                    </doc>
                </field>
            </doc>
            <doc>
                <field name="Name">Name 1005</field>
                <field name="_ID">1005</field>
                <field name="_shard">shard</field>
                <field name="Report">
                    <doc>
                        <field name="City">Novgorod</field>
                        <field name="Country">Russia</field>
                        <field name="CreateDate">2012-12-30 15:29:04</field>
                        <field name="MV">
                            <value>Nine</value>
                            <value>Ten</value>
                        </field>
                        <field name="People">1255000</field>
                        <field name="_ID">2005</field>
                    </doc>
                </field>
            </doc>
        </docs>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "totalobjects":"5",
          "docs":[
             {
                "doc":{
                   "Name":"Name 1001",
                   "_ID":"1001",
                   "_shard":"shard",
                   "Report":[
                      {
                         "doc":{
                            "City":"Moscow",
                            "Country":"Russia",
                            "CreateDate":"2011-04-05 12:32:08",
                            "MV":[
                               "One",
                               "Two"
                            ],
                            "People":"11980000",
                            "_ID":"2001"
                         }
                      },
                      {
                         "doc":{
                            "City":"Washington",
                            "Country":"USA",
                            "CreateDate":"2011-04-05 22:12:14",
                            "MV":[
                               "Four",
                               "Three"
                            ],
                            "People":"632323",
                            "_ID":"2002"
                         }
                      },
                      {
                         "doc":{
                            "City":"New York",
                            "Country":"USA",
                            "CreateDate":"2011-04-15 10:20:01",
                            "MV":[
                               "Five",
                               "Six"
                            ],
                            "People":"8245000",
                            "_ID":"2003"
                         }
                      },
                      {
                         "doc":{
                            "City":"Saint-Petersburg",
                            "Country":"Russia",
                            "CreateDate":"2011-06-22 09:05:20",
                            "MV":[
                               "Eight",
                               "Seven"
                            ],
                            "People":"4880000",
                            "_ID":"2004"
                         }
                      },
                      {
                         "doc":{
                            "City":"Novgorod",
                            "Country":"Russia",
                            "CreateDate":"2012-12-30 15:29:04",
                            "MV":[
                               "Nine",
                               "Ten"
                            ],
                            "People":"1255000",
                            "_ID":"2005"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "Name":"Name 1002",
                   "_ID":"1002",
                   "_shard":"shard",
                   "Report":[
                      {
                         "doc":{
                            "City":"Washington",
                            "Country":"USA",
                            "CreateDate":"2011-04-05 22:12:14",
                            "MV":[
                               "Four",
                               "Three"
                            ],
                            "People":"632323",
                            "_ID":"2002"
                         }
                      },
                      {
                         "doc":{
                            "City":"New York",
                            "Country":"USA",
                            "CreateDate":"2011-04-15 10:20:01",
                            "MV":[
                               "Five",
                               "Six"
                            ],
                            "People":"8245000",
                            "_ID":"2003"
                         }
                      },
                      {
                         "doc":{
                            "City":"Saint-Petersburg",
                            "Country":"Russia",
                            "CreateDate":"2011-06-22 09:05:20",
                            "MV":[
                               "Eight",
                               "Seven"
                            ],
                            "People":"4880000",
                            "_ID":"2004"
                         }
                      },
                      {
                         "doc":{
                            "City":"Novgorod",
                            "Country":"Russia",
                            "CreateDate":"2012-12-30 15:29:04",
                            "MV":[
                               "Nine",
                               "Ten"
                            ],
                            "People":"1255000",
                            "_ID":"2005"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "Name":"Name 1003",
                   "_ID":"1003",
                   "_shard":"shard",
                   "Report":[
                      {
                         "doc":{
                            "City":"New York",
                            "Country":"USA",
                            "CreateDate":"2011-04-15 10:20:01",
                            "MV":[
                               "Five",
                               "Six"
                            ],
                            "People":"8245000",
                            "_ID":"2003"
                         }
                      },
                      {
                         "doc":{
                            "City":"Saint-Petersburg",
                            "Country":"Russia",
                            "CreateDate":"2011-06-22 09:05:20",
                            "MV":[
                               "Eight",
                               "Seven"
                            ],
                            "People":"4880000",
                            "_ID":"2004"
                         }
                      },
                      {
                         "doc":{
                            "City":"Novgorod",
                            "Country":"Russia",
                            "CreateDate":"2012-12-30 15:29:04",
                            "MV":[
                               "Nine",
                               "Ten"
                            ],
                            "People":"1255000",
                            "_ID":"2005"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "Name":"Name 1004",
                   "_ID":"1004",
                   "_shard":"shard",
                   "Report":[
                      {
                         "doc":{
                            "City":"Saint-Petersburg",
                            "Country":"Russia",
                            "CreateDate":"2011-06-22 09:05:20",
                            "MV":[
                               "Eight",
                               "Seven"
                            ],
                            "People":"4880000",
                            "_ID":"2004"
                         }
                      },
                      {
                         "doc":{
                            "City":"Novgorod",
                            "Country":"Russia",
                            "CreateDate":"2012-12-30 15:29:04",
                            "MV":[
                               "Nine",
                               "Ten"
                            ],
                            "People":"1255000",
                            "_ID":"2005"
                         }
                      }
                   ]
                }
             },
             {
                "doc":{
                   "Name":"Name 1005",
                   "_ID":"1005",
                   "_shard":"shard",
                   "Report":[
                      {
                         "doc":{
                            "City":"Novgorod",
                            "Country":"Russia",
                            "CreateDate":"2012-12-30 15:29:04",
                            "MV":[
                               "Nine",
                               "Ten"
                            ],
                            "People":"1255000",
                            "_ID":"2005"
                         }
                      }
                   ]
                }
             }
          ]
       }
    }

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~   Test for Aggregates: COUNT ~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~
~ INTEGER ~
~~~~~~~~~~~
*** Request
    GET /Application/Table/_aggregate?m=COUNT(People)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="COUNT(People)" query="*"/>
        <totalobjects>5</totalobjects>
        <summary>5</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>3</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(People)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"5",
          "summary":"5",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=COUNT(People)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate metric="COUNT(People)" query="*"/>
        <totalobjects>5</totalobjects>
        <value>5</value>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(People)",
             "query":"*"
          },
          "totalobjects":"5",
          "value":"5"
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=COUNT(*)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate metric="COUNT(*)" query="*"/>
        <totalobjects>5</totalobjects>
        <value>5</value>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(*)",
             "query":"*"
          },
          "totalobjects":"5",
          "value":"5"
       }
    }

~~~~~~~~~~~~~
~ TIMESTAMP ~
~~~~~~~~~~~~~
*** Request
    GET /Application/Table/_aggregate?m=COUNT(CreateDate)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="COUNT(CreateDate)" query="*"/>
        <totalobjects>5</totalobjects>
        <summary>5</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>3</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(CreateDate)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"5",
          "summary":"5",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=COUNT(CreateDate)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate metric="COUNT(CreateDate)" query="*"/>
        <totalobjects>5</totalobjects>
        <value>5</value>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(CreateDate)",
             "query":"*"
          },
          "totalobjects":"5",
          "value":"5"
       }
    }

~~~~~~~~~~~~~
~ STRING SV ~
~~~~~~~~~~~~~
*** Request
    GET /Application/Table/_aggregate?m=COUNT(City)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="COUNT(City)" query="*"/>
        <totalobjects>5</totalobjects>
        <summary>5</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>3</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(City)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"5",
          "summary":"5",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=COUNT(Country)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate metric="COUNT(Country)" query="*"/>
        <totalobjects>5</totalobjects>
        <value>5</value>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(Country)",
             "query":"*"
          },
          "totalobjects":"5",
          "value":"5"
       }
    }

~~~~~~~~~~~~~
~ STRING MV ~
~~~~~~~~~~~~~
*** Request
    GET /Application/Table/_aggregate?m=COUNT(MV)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="COUNT(MV)" query="*"/>
        <totalobjects>5</totalobjects>
        <summary>10</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>6</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(MV)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"5",
          "summary":"10",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"6",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=COUNT(MV)&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate metric="COUNT(MV)" query="*"/>
        <totalobjects>5</totalobjects>
        <value>10</value>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(MV)",
             "query":"*"
          },
          "totalobjects":"5",
          "value":"10"
       }
    }

~~~~~~~~
~ LINK ~
~~~~~~~~
*** Request
    GET /Application/Table/_aggregate?m=COUNT(Manager)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="COUNT(Manager)" query="*"/>
        <totalobjects>5</totalobjects>
        <summary>15</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>10</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>5</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(Manager)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"5",
          "summary":"15",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"10",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"5",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table1/_aggregate?m=COUNT(Report)&f=Name&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Name" metric="COUNT(Report)" query="*"/>
        <totalobjects>5</totalobjects>
        <summary>15</summary>
        <totalgroups>5</totalgroups>
        <groups>
            <group>
                <metric>5</metric>
                <field name="Name">Name 1001</field>
            </group>
            <group>
                <metric>4</metric>
                <field name="Name">Name 1002</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Name">Name 1003</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Name">Name 1004</field>
            </group>
            <group>
                <metric>1</metric>
                <field name="Name">Name 1005</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(Report)",
             "query":"*",
             "group":"Name"
          },
          "totalobjects":"5",
          "summary":"15",
          "totalgroups":"5",
          "groups":[
             {
                "group":{
                   "metric":"5",
                   "field":{
                      "Name":"Name 1001"
                   }
                }
             },
             {
                "group":{
                   "metric":"4",
                   "field":{
                      "Name":"Name 1002"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Name":"Name 1003"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Name":"Name 1004"
                   }
                }
             },
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Name":"Name 1005"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=MINCOUNT(Manager)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="MINCOUNT(Manager)" query="*"/>
        <totalobjects>5</totalobjects>
        <summary>1</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>1</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>2</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"MINCOUNT(Manager)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"5",
          "summary":"1",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"1",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"2",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=MAXCOUNT(Manager)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="MAXCOUNT(Manager)" query="*"/>
        <totalobjects>5</totalobjects>
        <summary>5</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>5</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>3</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"MAXCOUNT(Manager)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"5",
          "summary":"5",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"5",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"3",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    DELETE /_applications/Application/ApplicationKey
*** Response: 
    200 OK

