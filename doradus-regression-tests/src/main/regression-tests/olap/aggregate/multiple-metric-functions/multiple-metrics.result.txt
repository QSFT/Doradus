~~~~~~~~~~~~~~
~ XML format ~
~~~~~~~~~~~~~~

~~~~~~~~~~~~~~~~~~~~~~
~ Create application ~
~~~~~~~~~~~~~~~~~~~~~~
*** Request
    POST /Application/_shards/shard
*** Response: 
    200 OK

~~~~~~~~~~~~~~~~~~~~
~ Table of Content ~
~~~~~~~~~~~~~~~~~~~~
*** Request
    GET /Application/Table/_query?q=*&f=_all&shards=shard
*** Response: xml
    200 OK
    <results>
        <totalobjects>12</totalobjects>
        <docs>
            <doc>
                <field name="City">Moscow</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2011-04-05 12:32:08.555</field>
                <field name="MV">One, Two</field>
                <field name="People">11980000</field>
                <field name="_ID">2001</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Washington</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2011-05-10 22:12:14.666</field>
                <field name="MV">Three, Four</field>
                <field name="People">632323</field>
                <field name="_ID">2002</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">New York</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2011-10-15 10:20:01.777</field>
                <field name="MV">Five, Six</field>
                <field name="People">8245000</field>
                <field name="_ID">2003</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Saint-Petersburg</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2012-06-22 09:05:20.888</field>
                <field name="MV">Seven, Eight</field>
                <field name="People">4880000</field>
                <field name="_ID">2004</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Novgorod</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2012-12-30 15:29:04.999</field>
                <field name="MV">Nine, Ten</field>
                <field name="People">1255000</field>
                <field name="_ID">2005</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Chicago</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2013-05-28 13:14:33.444</field>
                <field name="MV">Eleven, Twelve</field>
                <field name="People">2707000</field>
                <field name="_ID">2006</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Moscow</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2013-04-06 12:32:08.555</field>
                <field name="MV">Thirteen, Fourteen</field>
                <field name="People">21980000</field>
                <field name="_ID">2007</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Washington</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2013-10-26 22:12:14.666</field>
                <field name="MV">Fifteen, Sixteen</field>
                <field name="People">1632323</field>
                <field name="_ID">2008</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">New York</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2014-04-16 10:20:01.777</field>
                <field name="MV">Seventeen, Eighteen</field>
                <field name="People">18245000</field>
                <field name="_ID">2009</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Saint-Petersburg</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2014-11-23 09:05:20.888</field>
                <field name="MV">Nineteen, Twenty</field>
                <field name="People">14880000</field>
                <field name="_ID">2010</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Novgorod</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2015-03-31 15:29:04.999</field>
                <field name="MV">Twenty One, Twenty Two</field>
                <field name="People">11255000</field>
                <field name="_ID">2011</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Chicago</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2015-09-21 13:14:33.444</field>
                <field name="MV">Twenty Three, Twenty Four</field>
                <field name="People">12707000</field>
                <field name="_ID">2012</field>
                <field name="_shard">shard</field>
            </doc>
        </docs>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "totalobjects":"12",
          "docs":[
             {
                "doc":{
                   "City":"Moscow",
                   "Country":"Russia",
                   "CreateDate":"2011-04-05 12:32:08.555",
                   "MV":"One, Two",
                   "People":"11980000",
                   "_ID":"2001",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Washington",
                   "Country":"USA",
                   "CreateDate":"2011-05-10 22:12:14.666",
                   "MV":"Three, Four",
                   "People":"632323",
                   "_ID":"2002",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"New York",
                   "Country":"USA",
                   "CreateDate":"2011-10-15 10:20:01.777",
                   "MV":"Five, Six",
                   "People":"8245000",
                   "_ID":"2003",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Saint-Petersburg",
                   "Country":"Russia",
                   "CreateDate":"2012-06-22 09:05:20.888",
                   "MV":"Seven, Eight",
                   "People":"4880000",
                   "_ID":"2004",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Novgorod",
                   "Country":"Russia",
                   "CreateDate":"2012-12-30 15:29:04.999",
                   "MV":"Nine, Ten",
                   "People":"1255000",
                   "_ID":"2005",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Chicago",
                   "Country":"USA",
                   "CreateDate":"2013-05-28 13:14:33.444",
                   "MV":"Eleven, Twelve",
                   "People":"2707000",
                   "_ID":"2006",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Moscow",
                   "Country":"Russia",
                   "CreateDate":"2013-04-06 12:32:08.555",
                   "MV":"Thirteen, Fourteen",
                   "People":"21980000",
                   "_ID":"2007",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Washington",
                   "Country":"USA",
                   "CreateDate":"2013-10-26 22:12:14.666",
                   "MV":"Fifteen, Sixteen",
                   "People":"1632323",
                   "_ID":"2008",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"New York",
                   "Country":"USA",
                   "CreateDate":"2014-04-16 10:20:01.777",
                   "MV":"Seventeen, Eighteen",
                   "People":"18245000",
                   "_ID":"2009",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Saint-Petersburg",
                   "Country":"Russia",
                   "CreateDate":"2014-11-23 09:05:20.888",
                   "MV":"Nineteen, Twenty",
                   "People":"14880000",
                   "_ID":"2010",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Novgorod",
                   "Country":"Russia",
                   "CreateDate":"2015-03-31 15:29:04.999",
                   "MV":"Twenty One, Twenty Two",
                   "People":"11255000",
                   "_ID":"2011",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Chicago",
                   "Country":"USA",
                   "CreateDate":"2015-09-21 13:14:33.444",
                   "MV":"Twenty Three, Twenty Four",
                   "People":"12707000",
                   "_ID":"2012",
                   "_shard":"shard"
                }
             }
          ]
       }
    }

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~    Test for Aggregates: Multiple Metric Functions ~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
*** Request
    GET /Application/Table/_aggregate?m=COUNT(People),MAX(MV)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="COUNT(People),MAX(MV)" query="*"/>
        <totalobjects>12</totalobjects>
        <groupsets>
            <groupset group="Country" metric="COUNT(People)">
                <summary>12</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>6</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>6</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="MAX(MV)">
                <summary>Twenty Three, Twenty Four</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>Twenty One, Twenty Two</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>Twenty Three, Twenty Four</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
        </groupsets>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(People),MAX(MV)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "groupsets":[
             {
                "groupset":{
                   "group":"Country",
                   "metric":"COUNT(People)",
                   "summary":"12",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"6",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"6",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"MAX(MV)",
                   "summary":"Twenty Three, Twenty Four",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"Twenty One, Twenty Two",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"Twenty Three, Twenty Four",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=COUNT(People),MAX(MV),AVERAGE(CreateDate)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country"
            metric="COUNT(People),MAX(MV),AVERAGE(CreateDate)" query="*"/>
        <totalobjects>12</totalobjects>
        <groupsets>
            <groupset group="Country" metric="COUNT(People)">
                <summary>12</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>6</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>6</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="MAX(MV)">
                <summary>Twenty Three, Twenty Four</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>Twenty One, Twenty Two</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>Twenty Three, Twenty Four</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="AVERAGE(CreateDate)">
                <summary>2013-05-17 19:48:54</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>2013-05-10 08:22:11</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>2013-05-25 07:15:36</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
        </groupsets>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(People),MAX(MV),AVERAGE(CreateDate)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "groupsets":[
             {
                "groupset":{
                   "group":"Country",
                   "metric":"COUNT(People)",
                   "summary":"12",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"6",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"6",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"MAX(MV)",
                   "summary":"Twenty Three, Twenty Four",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"Twenty One, Twenty Two",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"Twenty Three, Twenty Four",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"AVERAGE(CreateDate)",
                   "summary":"2013-05-17 19:48:54",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"2013-05-10 08:22:11",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"2013-05-25 07:15:36",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=COUNT(People),MAX(MV),AVERAGE(CreateDate),MIN(City)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country"
            metric="COUNT(People),MAX(MV),AVERAGE(CreateDate),MIN(City)" query="*"/>
        <totalobjects>12</totalobjects>
        <groupsets>
            <groupset group="Country" metric="COUNT(People)">
                <summary>12</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>6</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>6</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="MAX(MV)">
                <summary>Twenty Three, Twenty Four</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>Twenty One, Twenty Two</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>Twenty Three, Twenty Four</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="AVERAGE(CreateDate)">
                <summary>2013-05-17 19:48:54</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>2013-05-10 08:22:11</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>2013-05-25 07:15:36</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="MIN(City)">
                <summary>Chicago</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>Moscow</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>Chicago</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
        </groupsets>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(People),MAX(MV),AVERAGE(CreateDate),MIN(City)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "groupsets":[
             {
                "groupset":{
                   "group":"Country",
                   "metric":"COUNT(People)",
                   "summary":"12",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"6",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"6",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"MAX(MV)",
                   "summary":"Twenty Three, Twenty Four",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"Twenty One, Twenty Two",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"Twenty Three, Twenty Four",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"AVERAGE(CreateDate)",
                   "summary":"2013-05-17 19:48:54",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"2013-05-10 08:22:11",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"2013-05-25 07:15:36",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"MIN(City)",
                   "summary":"Chicago",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"Moscow",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"Chicago",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=COUNT(People),MAX(MV),AVERAGE(CreateDate),MIN(City),SUM(People)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country"
            metric="COUNT(People),MAX(MV),AVERAGE(CreateDate),MIN(City),SUM(People)" query="*"/>
        <totalobjects>12</totalobjects>
        <groupsets>
            <groupset group="Country" metric="COUNT(People)">
                <summary>12</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>6</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>6</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="MAX(MV)">
                <summary>Twenty Three, Twenty Four</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>Twenty One, Twenty Two</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>Twenty Three, Twenty Four</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="AVERAGE(CreateDate)">
                <summary>2013-05-17 19:48:54</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>2013-05-10 08:22:11</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>2013-05-25 07:15:36</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="MIN(City)">
                <summary>Chicago</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>Moscow</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>Chicago</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="SUM(People)">
                <summary>110398646</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>66230000</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>44168646</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
        </groupsets>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(People),MAX(MV),AVERAGE(CreateDate),MIN(City),SUM(People)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "groupsets":[
             {
                "groupset":{
                   "group":"Country",
                   "metric":"COUNT(People)",
                   "summary":"12",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"6",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"6",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"MAX(MV)",
                   "summary":"Twenty Three, Twenty Four",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"Twenty One, Twenty Two",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"Twenty Three, Twenty Four",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"AVERAGE(CreateDate)",
                   "summary":"2013-05-17 19:48:54",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"2013-05-10 08:22:11",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"2013-05-25 07:15:36",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"MIN(City)",
                   "summary":"Chicago",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"Moscow",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"Chicago",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"SUM(People)",
                   "summary":"110398646",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"66230000",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"44168646",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             }
          ]
       }
    }

*** Request
    DELETE /_applications/Application/ApplicationKey
*** Response: 
    200 OK

~~~~~~~~~~~~~~~
~ JSON format ~
~~~~~~~~~~~~~~~

~~~~~~~~~~~~~~~~~~~~~~
~ Create application ~
~~~~~~~~~~~~~~~~~~~~~~
*** Request
    POST /Application/_shards/shard
*** Response: 
    200 OK

~~~~~~~~~~~~~~~~~~~~
~ Table of Content ~
~~~~~~~~~~~~~~~~~~~~
*** Request
    GET /Application/Table/_query?q=*&f=_all&shards=shard
*** Response: xml
    200 OK
    <results>
        <totalobjects>12</totalobjects>
        <docs>
            <doc>
                <field name="City">Moscow</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2011-04-05 12:32:08.555</field>
                <field name="MV">One, Two</field>
                <field name="People">11980000</field>
                <field name="_ID">2001</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Washington</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2011-05-10 22:12:14.666</field>
                <field name="MV">Three, Four</field>
                <field name="People">632323</field>
                <field name="_ID">2002</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">New York</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2011-10-15 10:20:01.777</field>
                <field name="MV">Five, Six</field>
                <field name="People">8245000</field>
                <field name="_ID">2003</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Saint-Petersburg</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2012-06-22 09:05:20.888</field>
                <field name="MV">Seven, Eight</field>
                <field name="People">4880000</field>
                <field name="_ID">2004</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Novgorod</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2012-12-30 15:29:04.999</field>
                <field name="MV">Nine, Ten</field>
                <field name="People">1255000</field>
                <field name="_ID">2005</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Chicago</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2013-05-28 13:14:33.444</field>
                <field name="MV">Eleven, Twelve</field>
                <field name="People">2707000</field>
                <field name="_ID">2006</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Moscow</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2013-04-06 12:32:08.555</field>
                <field name="MV">Thirteen, Fourteen</field>
                <field name="People">21980000</field>
                <field name="_ID">2007</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Washington</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2013-10-26 22:12:14.666</field>
                <field name="MV">Fifteen, Sixteen</field>
                <field name="People">1632323</field>
                <field name="_ID">2008</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">New York</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2014-04-16 10:20:01.777</field>
                <field name="MV">Seventeen, Eighteen</field>
                <field name="People">18245000</field>
                <field name="_ID">2009</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Saint-Petersburg</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2014-11-23 09:05:20.888</field>
                <field name="MV">Nineteen, Twenty</field>
                <field name="People">14880000</field>
                <field name="_ID">2010</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Novgorod</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2015-03-31 15:29:04.999</field>
                <field name="MV">Twenty One, Twenty Two</field>
                <field name="People">11255000</field>
                <field name="_ID">2011</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Chicago</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2015-09-21 13:14:33.444</field>
                <field name="MV">Twenty Three, Twenty Four</field>
                <field name="People">12707000</field>
                <field name="_ID">2012</field>
                <field name="_shard">shard</field>
            </doc>
        </docs>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "totalobjects":"12",
          "docs":[
             {
                "doc":{
                   "City":"Moscow",
                   "Country":"Russia",
                   "CreateDate":"2011-04-05 12:32:08.555",
                   "MV":"One, Two",
                   "People":"11980000",
                   "_ID":"2001",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Washington",
                   "Country":"USA",
                   "CreateDate":"2011-05-10 22:12:14.666",
                   "MV":"Three, Four",
                   "People":"632323",
                   "_ID":"2002",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"New York",
                   "Country":"USA",
                   "CreateDate":"2011-10-15 10:20:01.777",
                   "MV":"Five, Six",
                   "People":"8245000",
                   "_ID":"2003",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Saint-Petersburg",
                   "Country":"Russia",
                   "CreateDate":"2012-06-22 09:05:20.888",
                   "MV":"Seven, Eight",
                   "People":"4880000",
                   "_ID":"2004",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Novgorod",
                   "Country":"Russia",
                   "CreateDate":"2012-12-30 15:29:04.999",
                   "MV":"Nine, Ten",
                   "People":"1255000",
                   "_ID":"2005",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Chicago",
                   "Country":"USA",
                   "CreateDate":"2013-05-28 13:14:33.444",
                   "MV":"Eleven, Twelve",
                   "People":"2707000",
                   "_ID":"2006",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Moscow",
                   "Country":"Russia",
                   "CreateDate":"2013-04-06 12:32:08.555",
                   "MV":"Thirteen, Fourteen",
                   "People":"21980000",
                   "_ID":"2007",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Washington",
                   "Country":"USA",
                   "CreateDate":"2013-10-26 22:12:14.666",
                   "MV":"Fifteen, Sixteen",
                   "People":"1632323",
                   "_ID":"2008",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"New York",
                   "Country":"USA",
                   "CreateDate":"2014-04-16 10:20:01.777",
                   "MV":"Seventeen, Eighteen",
                   "People":"18245000",
                   "_ID":"2009",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Saint-Petersburg",
                   "Country":"Russia",
                   "CreateDate":"2014-11-23 09:05:20.888",
                   "MV":"Nineteen, Twenty",
                   "People":"14880000",
                   "_ID":"2010",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Novgorod",
                   "Country":"Russia",
                   "CreateDate":"2015-03-31 15:29:04.999",
                   "MV":"Twenty One, Twenty Two",
                   "People":"11255000",
                   "_ID":"2011",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Chicago",
                   "Country":"USA",
                   "CreateDate":"2015-09-21 13:14:33.444",
                   "MV":"Twenty Three, Twenty Four",
                   "People":"12707000",
                   "_ID":"2012",
                   "_shard":"shard"
                }
             }
          ]
       }
    }

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~    Test for Aggregates: Multiple Metric Functions ~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
*** Request
    GET /Application/Table/_aggregate?m=COUNT(People),MAX(MV)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="COUNT(People),MAX(MV)" query="*"/>
        <totalobjects>12</totalobjects>
        <groupsets>
            <groupset group="Country" metric="COUNT(People)">
                <summary>12</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>6</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>6</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="MAX(MV)">
                <summary>Twenty Three, Twenty Four</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>Twenty One, Twenty Two</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>Twenty Three, Twenty Four</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
        </groupsets>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(People),MAX(MV)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "groupsets":[
             {
                "groupset":{
                   "group":"Country",
                   "metric":"COUNT(People)",
                   "summary":"12",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"6",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"6",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"MAX(MV)",
                   "summary":"Twenty Three, Twenty Four",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"Twenty One, Twenty Two",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"Twenty Three, Twenty Four",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=COUNT(People),MAX(MV),AVERAGE(CreateDate)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country"
            metric="COUNT(People),MAX(MV),AVERAGE(CreateDate)" query="*"/>
        <totalobjects>12</totalobjects>
        <groupsets>
            <groupset group="Country" metric="COUNT(People)">
                <summary>12</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>6</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>6</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="MAX(MV)">
                <summary>Twenty Three, Twenty Four</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>Twenty One, Twenty Two</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>Twenty Three, Twenty Four</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="AVERAGE(CreateDate)">
                <summary>2013-05-17 19:48:54</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>2013-05-10 08:22:11</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>2013-05-25 07:15:36</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
        </groupsets>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(People),MAX(MV),AVERAGE(CreateDate)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "groupsets":[
             {
                "groupset":{
                   "group":"Country",
                   "metric":"COUNT(People)",
                   "summary":"12",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"6",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"6",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"MAX(MV)",
                   "summary":"Twenty Three, Twenty Four",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"Twenty One, Twenty Two",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"Twenty Three, Twenty Four",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"AVERAGE(CreateDate)",
                   "summary":"2013-05-17 19:48:54",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"2013-05-10 08:22:11",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"2013-05-25 07:15:36",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=COUNT(People),MAX(MV),AVERAGE(CreateDate),MIN(City)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country"
            metric="COUNT(People),MAX(MV),AVERAGE(CreateDate),MIN(City)" query="*"/>
        <totalobjects>12</totalobjects>
        <groupsets>
            <groupset group="Country" metric="COUNT(People)">
                <summary>12</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>6</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>6</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="MAX(MV)">
                <summary>Twenty Three, Twenty Four</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>Twenty One, Twenty Two</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>Twenty Three, Twenty Four</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="AVERAGE(CreateDate)">
                <summary>2013-05-17 19:48:54</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>2013-05-10 08:22:11</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>2013-05-25 07:15:36</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="MIN(City)">
                <summary>Chicago</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>Moscow</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>Chicago</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
        </groupsets>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(People),MAX(MV),AVERAGE(CreateDate),MIN(City)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "groupsets":[
             {
                "groupset":{
                   "group":"Country",
                   "metric":"COUNT(People)",
                   "summary":"12",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"6",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"6",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"MAX(MV)",
                   "summary":"Twenty Three, Twenty Four",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"Twenty One, Twenty Two",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"Twenty Three, Twenty Four",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"AVERAGE(CreateDate)",
                   "summary":"2013-05-17 19:48:54",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"2013-05-10 08:22:11",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"2013-05-25 07:15:36",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"MIN(City)",
                   "summary":"Chicago",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"Moscow",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"Chicago",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=COUNT(People),MAX(MV),AVERAGE(CreateDate),MIN(City),SUM(People)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country"
            metric="COUNT(People),MAX(MV),AVERAGE(CreateDate),MIN(City),SUM(People)" query="*"/>
        <totalobjects>12</totalobjects>
        <groupsets>
            <groupset group="Country" metric="COUNT(People)">
                <summary>12</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>6</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>6</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="MAX(MV)">
                <summary>Twenty Three, Twenty Four</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>Twenty One, Twenty Two</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>Twenty Three, Twenty Four</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="AVERAGE(CreateDate)">
                <summary>2013-05-17 19:48:54</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>2013-05-10 08:22:11</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>2013-05-25 07:15:36</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="MIN(City)">
                <summary>Chicago</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>Moscow</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>Chicago</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="SUM(People)">
                <summary>110398646</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>66230000</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>44168646</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
        </groupsets>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(People),MAX(MV),AVERAGE(CreateDate),MIN(City),SUM(People)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "groupsets":[
             {
                "groupset":{
                   "group":"Country",
                   "metric":"COUNT(People)",
                   "summary":"12",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"6",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"6",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"MAX(MV)",
                   "summary":"Twenty Three, Twenty Four",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"Twenty One, Twenty Two",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"Twenty Three, Twenty Four",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"AVERAGE(CreateDate)",
                   "summary":"2013-05-17 19:48:54",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"2013-05-10 08:22:11",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"2013-05-25 07:15:36",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"MIN(City)",
                   "summary":"Chicago",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"Moscow",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"Chicago",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"SUM(People)",
                   "summary":"110398646",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"66230000",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"44168646",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             }
          ]
       }
    }

*** Request
    DELETE /_applications/Application/ApplicationKey
*** Response: 
    200 OK

