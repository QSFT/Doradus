<html><head><meta name='referrer' content='origin'><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="generator" content="" /><title></title></head><body style="background:#ffffff"><div><div style="-aw-different-first-page:true; -aw-headerfooter-type:header-primary"><p style="margin:0pt"><span style="width:190.23pt; text-indent:0pt; display:inline-block; -aw-tabstop-align:center; -aw-tabstop-pos:260.65pt"></span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt; text-decoration:underline">Doradus Tutorial: Hello Spider!</span><span style="width:190.93pt; text-indent:0pt; display:inline-block; -aw-tabstop-align:right; -aw-tabstop-pos:522pt"></span></p></div><p style="margin:0pt 0pt 15pt"><span style="color:#17365d; font-family:'Museo Sans For Dell Regular'; font-size:26pt; letter-spacing:0.25pt">Tutorial: Hello Spider</span><span style="color:#17365d; font-family:'Museo Sans For Dell Regular'; font-size:26pt; letter-spacing:0.25pt">!</span></p><h1 style="margin:12pt 0pt; page-break-after:avoid; page-break-inside:avoid"><span style="color:#345a8a; font-family:'Museo For Dell Regular'; font-size:16pt; font-weight:bold">What is Spider?</span></h1><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Spider is one of the </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt; font-style:italic">storage services</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> offered by Doradus. </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Spider is flexible</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> and </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">easy-to-use</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">so </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">it</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">’s </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">great </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">for </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">lea</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">r</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">n</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">ing</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">about the Doradus data model and query language.</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> In this tutorial, we’ll create a simple Spider application, add some data, and perform some queries. </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Along the way</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, we’ll </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">also explore</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> the basics of the Doradus </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">REST API.</span></p><h1 style="margin:12pt 0pt; page-break-after:avoid; page-break-inside:avoid"><span style="color:#345a8a; font-family:'Museo For Dell Regular'; font-size:16pt; font-weight:bold">Creat</span><span style="color:#345a8a; font-family:'Museo For Dell Regular'; font-size:16pt; font-weight:bold">ing</span><span style="color:#345a8a; font-family:'Museo For Dell Regular'; font-size:16pt; font-weight:bold"> a Spider Application</span></h1><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">To </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">store data in Doradus</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">we</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">first </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">need a</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">database instance</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, which Doradus calls an </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt; font-style:italic">application</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">. </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Each application has a schema, which defines </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">the </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">application</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">’s</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> name and </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">the </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">storage service </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">that </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">will </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">manage</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> its data. Spider is the default storage service, so </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">we</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> don’t have to explicitly choose it. </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Furthermore, </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Spider allows dynamically-added tables and fields, </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">so the </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">only </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">thing our schema </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">need</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">s</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">is</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">the </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">application</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> name. </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">T</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">he simplest Spider application </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">schema </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">is the following XML document:</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">&lt;application name="HelloSpider"/&gt;</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Doradus also supports JSON for all input and output messages. The equivalent JSON document is</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">:</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">{"HelloSpider": null}</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">We’ll </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">mostly use JSON in this tutorial: s</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">ee the </span><a rel='noreferrer' href="https://github.com/dell-oss/Doradus/blob/master/docs/Doradus%20Spider%20Database.pdf" target=_blank"><span style="color:#0000ff; font-family:'Museo Sans For Dell Regular'; font-size:11pt; text-decoration:underline">Doradus Spider</span></a><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> documentation fo</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">r more details on </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">JSON and </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">XML message</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> formats</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">.</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">To create the application, </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">we </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">need </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">to </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">POST the schema to the </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">system </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">resource </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">called </span><span style="color:#595959; font-family:Consolas; font-size:10pt">_applications</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">. If </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">we </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">have the Doradus server running on our local machine and </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">we have </span><span style="color:#595959; font-family:Consolas; font-size:10pt">curl</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">we </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">can use the following command:</span></p><p style="margin:12pt 0pt 12pt 18pt; padding-left:18pt; text-indent:-18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">curl -X POST -d '{"HelloSpider": null}' -H "content-type: application/json" http://localhost:1123/_applications</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">This creates </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">an </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">application</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> named</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">HelloSpider</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, managed by </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">the Spider storage service.</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">We</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> can verify that the application exists by </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">get</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">ting its schema </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">with this </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">command</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">:</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">curl http://localhost:1123/_applications</span><span style="color:#595959; font-family:Consolas; font-size:10pt">/HelloSpider</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">By default, outp</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">ut messages are returned in XML, so we’ll get </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">the </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">following schema</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">:</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">&lt;application name="HelloSpider"&gt;</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   </span><span style="color:#595959; font-family:Consolas; font-size:10pt">&lt;options&gt;</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">      </span><span style="color:#595959; font-family:Consolas; font-size:10pt">&lt;option name="AutoTables"&gt;true&lt;/option&gt;</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">      </span><span style="color:#595959; font-family:Consolas; font-size:10pt">&lt;option name="StorageService"&gt;SpiderService&lt;/option&gt;</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   </span><span style="color:#595959; font-family:Consolas; font-size:10pt">&lt;/options&gt;</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">&lt;/application&gt;</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">We </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">can request </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">JSON </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">formatting </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">either by </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">adding the header </span><span style="color:#595959; font-family:Consolas; font-size:10pt">accept: application/json</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> to the request or by adding </span><span style="color:#595959; font-family:Consolas; font-size:10pt">?format=json</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> to the URI:</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">curl http://localhost:1123/_applications/HelloSpider?format=json</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">The </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">response </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">in JSON is shown below:</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">{</span><span style="color:#595959; font-family:Consolas; font-size:10pt">"HelloSpider":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"options":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">      </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"AutoTables":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"true",</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">      </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"StorageService":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"SpiderService"</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   </span><span style="color:#595959; font-family:Consolas; font-size:10pt">}</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">}}</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Notice that </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">our </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">application’s schema </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">is automatically assigned</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> default </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">options</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">: The </span><span style="color:#595959; font-family:Consolas; font-size:10pt">StorageService</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> option defaults to </span><span style="color:#595959; font-family:Consolas; font-size:10pt">SpiderService</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, and the </span><span style="color:#595959; font-family:Consolas; font-size:10pt">AutoTables</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> option defaults to </span><span style="color:#595959; font-family:Consolas; font-size:10pt">true</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">. This option is described next.</span></p><h1 style="margin:12pt 0pt; page-break-after:avoid; page-break-inside:avoid"><span style="color:#345a8a; font-family:'Museo For Dell Regular'; font-size:16pt; font-weight:bold">Add</span><span style="color:#345a8a; font-family:'Museo For Dell Regular'; font-size:16pt; font-weight:bold">ing</span><span style="color:#345a8a; font-family:'Museo For Dell Regular'; font-size:16pt; font-weight:bold"> Some </span><span style="color:#345a8a; font-family:'Museo For Dell Regular'; font-size:16pt; font-weight:bold">Data</span></h1><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Doradus stores an application’s data in </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt; font-style:italic">tables</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, whose members are called </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt; font-style:italic">objects</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">. An object’s values are stored in </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt; font-style:italic">fields</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">. When a Spider application’s </span><span style="color:#595959; font-family:Consolas; font-size:10pt">AutoTables</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> option is </span><span style="color:#595959; font-family:Consolas; font-size:10pt">true</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, tables can be dynamically added. </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">And, s</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">ince Spider supports dynamically-added fields, we can </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">objects with any fields we want</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">.</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Let’s </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">create </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">some </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">“</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">spider name</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">”</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">objects</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> by creating </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">a JSON-formatted file called </span><span style="color:#595959; font-family:Consolas; font-size:10pt">spiders.data</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">:</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">{"batch": {</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   "docs": [</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">      {"doc": {"Name": "Tarantula"}},</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">      {"doc": {"Name": "Alpha Romeo"}},</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">      {"doc": {"Name": "Itsy Bitsy"}}</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   ]</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">}}</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">The outer </span><span style="color:#595959; font-family:Consolas; font-size:10pt">batch</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">group contains an array called </span><span style="color:#595959; font-family:Consolas; font-size:10pt">docs</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, which contains one </span><span style="color:#595959; font-family:Consolas; font-size:10pt">doc</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> group </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">per </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">object. In this example, </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">each object assigns a single </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">field called </span><span style="color:#595959; font-family:Consolas; font-size:10pt">Name</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">. </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">We can add these objects to a table called </span><span style="color:#595959; font-family:Consolas; font-size:10pt">Spiders</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">using the REST URI</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">:</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">POST /</span><span style="color:#595959; font-family:Consolas; font-size:10pt; font-style:italic">application</span><span style="color:#595959; font-family:Consolas; font-size:10pt">/</span><span style="color:#595959; font-family:Consolas; font-size:10pt; font-style:italic">table</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">. </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Using </span><span style="color:#595959; font-family:Consolas; font-size:10pt">curl</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">:</span></p><p style="margin:12pt 0pt 12pt 18pt; padding-left:18pt; text-indent:-18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">curl </span><span style="color:#595959; font-family:Consolas; font-size:10pt">-X POST -H "content-type: application/json" -d @spiders.data http://localhost:1123/HelloSpider/Spiders</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">When </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">we </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">send </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">an </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">update</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> to the </span><span style="color:#595959; font-family:Consolas; font-size:10pt">Spiders</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> table</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">if </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">it </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">doesn’t exist, </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">the </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Spider </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">service </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">creates it automatically. </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">The </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">objects</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> are then added</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">,</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> setting the </span><span style="color:#595959; font-family:Consolas; font-size:10pt">Name</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> field</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> for each one</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">. Since objects must have an ID and we didn’t assign any, Doradus automatically assigns a unique ID.</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> In case we need to know what the</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">se</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> are right away, the</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> IDs</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> are returned in the REST response of our POST command:</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">{"batch-result":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"status":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"OK",</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"has_updates":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"true",</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"docs":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">[</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">      </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{"doc":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{"updated":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"true",</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"status":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"OK",</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"_ID":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"AAFNRJ9GsmZtp5adLQAA"}},</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">      </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{"doc":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{"updated":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"true",</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"status":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"OK",</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"_ID":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"AAFNRJ9GwmZtp5adLQAA"}},</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">      </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{"doc":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{"updated":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"true",</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"status":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"OK",</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"_ID":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"AAFNRJ9Gw2Ztp5adLQAA"}}</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   </span><span style="color:#595959; font-family:Consolas; font-size:10pt">]</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">}}</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">The </span><span style="color:#595959; font-family:Consolas; font-size:10pt">batch-result</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> group contains a </span><span style="color:#595959; font-family:Consolas; font-size:10pt">docs</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> array with one </span><span style="color:#595959; font-family:Consolas; font-size:10pt">doc</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> group for each object. </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Each object’s ID is given in the </span><span style="color:#595959; font-family:Consolas; font-size:10pt">_ID</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> field </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">along with </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">the status for th</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">at update</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">. The </span><span style="color:#595959; font-family:Consolas; font-size:10pt">updated</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> flag and </span><span style="color:#595959; font-family:Consolas; font-size:10pt">status</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">field </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">show that an update actually occurred. These might seem superfluous, but some updates might not actually change anyth</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">ing</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">: if we set the </span><span style="color:#595959; font-family:Consolas; font-size:10pt">_ID</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> field and the corresponding object already exists, </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">it is updated</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">.</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> If none of the other fields we set are </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">new or </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">different from the existing object, nothing is </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">changed</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, which is reflected in the REST response.</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">What happens if we fetch the application schema now? I</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">n JSON, i</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">t looks like this:</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">{"HelloSpider":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"options":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">      </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"AutoTables":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"true",</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">      </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"StorageService":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"SpiderService"</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   </span><span style="color:#595959; font-family:Consolas; font-size:10pt">},</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"tables":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">      </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"Spiders":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{}</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   </span><span style="color:#595959; font-family:Consolas; font-size:10pt">}</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">}}</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">This shows that our schema was automatically extended to declare the </span><span style="color:#595959; font-family:Consolas; font-size:10pt">Spiders</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> table</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> without any explicitly-defined fields</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">. This means the </span><span style="color:#595959; font-family:Consolas; font-size:10pt">Name</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">field we assigned </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">is </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">anonymous. Such fields are </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">implicitly</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> considered text and indexed using the full text analyzer. This means it is efficient to query such fields even though they are undeclared.</span></p><h1 style="margin:12pt 0pt; page-break-after:avoid; page-break-inside:avoid"><span style="color:#345a8a; font-family:'Museo For Dell Regular'; font-size:16pt; font-weight:bold">Querying Objects</span></h1><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Doradus supports two kinds of queries: </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt; font-style:italic">object</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> queries, which select and return objects, and </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt; font-style:italic">aggregate</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> queries, which select objects and perform metric computations such as COUNT. </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Object queries use the general URI format:</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">GET /</span><span style="color:#595959; font-family:Consolas; font-size:10pt; font-style:italic">application</span><span style="color:#595959; font-family:Consolas; font-size:10pt">/</span><span style="color:#595959; font-family:Consolas; font-size:10pt; font-style:italic">table</span><span style="color:#595959; font-family:Consolas; font-size:10pt">/_query?{params}</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Where </span><span style="color:#595959; font-family:Consolas; font-size:10pt; font-style:italic">application</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> and </span><span style="color:#595959; font-family:Consolas; font-size:10pt; font-style:italic">table</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> specify which objects we want, </span><span style="color:#595959; font-family:Consolas; font-size:10pt">_query</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> is the system resource for object queries, and </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{params}</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> are </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">the </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">query parameters.</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> The only required parameter is ‘q’, which is the Doradus Query Language (DQL)</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">expression. </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">The simplest object query is to return all objects </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">using </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">the query parameter </span><span style="color:#595959; font-family:Consolas; font-size:10pt">q=*</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">:</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">curl -H "accept: application/json" http://localhost:1123/HelloSpider/Spiders/_query?q=*</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">(Note that because queries are GET commands and all parameters can be passed via the URI, browsers work fine as a query tool.) This returns a JSON message like this:</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">{"results":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"docs":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">[</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">      </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{"doc":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{"Name":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"Tarantula",</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"_ID":"AAFNRJ9GsmZtp5adLQAA"}},</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">      </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{"doc":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{"Name":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"Itsy Bitsy",</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"_ID":"AAFNRJ9Gw2Ztp5adLQAA"}},</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">      </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{"doc":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{"Name":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"Alpha Romeo",</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"_ID":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"AAFNRJ9GwmZtp5adLQAA"}}</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   </span><span style="color:#595959; font-family:Consolas; font-size:10pt">]</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">}}</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">What we actually get is a </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt; font-style:italic">page</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> of results. If there were more than 100 </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">objects</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">the response w</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">ould get a </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt; font-style:italic">continue</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> token, which we can use to </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">fetch</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> the next page. We can control the page size with the </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">‘s’</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> parameter</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">:</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">curl -H "accept: application/json" http://localhost:1123/HelloSpider/Spiders/_query?q=*</span><span style="color:#595959; font-family:Consolas; font-size:10pt">&amp;s=50</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Here’s a que</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">ry that finds all </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Spiders whose name contain the </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt; font-style:italic">term</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> “alpha”:</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">curl -H "accept: application/json" http://localhost:1123/HelloSpider/Spiders/_query?q=</span><span style="color:#595959; font-family:Consolas; font-size:10pt">Name:alpha</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Note that the term </span><span style="color:#595959; font-family:Consolas; font-size:10pt">alpha</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> will select the object whose name is </span><span style="color:#595959; font-family:Consolas; font-size:10pt">Alpha Romeo</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> because text searches are case-insensitive. </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Object queries support several other parameters, </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">and </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">DQL supports a </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">side range of query </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">expressions. </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">See the full </span><a rel='noreferrer' href="https://github.com/dell-oss/Doradus/blob/master/docs/Doradus%20Spider%20Database.pdf" target=_blank"><span style="color:#0000ff; font-family:'Museo Sans For Dell Regular'; font-size:11pt; text-decoration:underline">Doradus Spider</span></a><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> documentation for details.</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Now</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> let’s try an aggregate query, which use</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">s</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> the system resource </span><span style="color:#595959; font-family:Consolas; font-size:10pt">_aggregate</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">. The simplest aggregate query count</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">s</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> all objects</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> using the ‘m’ parameter:</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">curl</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> -H "accept: application/json" </span><span style="color:#595959; font-family:Consolas; font-size:10pt">http://localhost:1123/HelloSpide</span><span style="color:#595959; font-family:Consolas; font-size:10pt">r/Spiders/_aggregate?m=COUNT(*)</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Here’s a typical response for this query:</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">{"results":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"aggregate":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{"metric":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"COUNT(*)"},</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"totalobjects":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"3",</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"value":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"3"</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">}}</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">The </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">metric function result is given in </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">the field called </span><span style="color:#595959; font-family:Consolas; font-size:10pt">value</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">. The </span><span style="color:#595959; font-family:Consolas; font-size:10pt">aggregate</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> field echoes the query we requested, and the </span><span style="color:#595959; font-family:Consolas; font-size:10pt">totalobjects</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> field indicates how many objects were scanned by this query. (For some queries, </span><span style="color:#595959; font-family:Consolas; font-size:10pt">value</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> and </span><span style="color:#595959; font-family:Consolas; font-size:10pt">totalobjects</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> can be different.)</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> Like object queries, aggregate queries support several parameters and a wide range of functions</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, so see the full documentation for details.</span></p><h1 style="margin:12pt 0pt; page-break-after:avoid; page-break-inside:avoid"><span style="color:#345a8a; font-family:'Museo For Dell Regular'; font-size:16pt; font-weight:bold">Explicitly Defining Fields</span></h1><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">When might we want to explicitly define fields in </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">a Spider </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">schema? There are </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">things we can change when we explicitly define a field</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">: (1) </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">the field’s </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">type</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, (2) </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">how it </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">is indexed</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, and (3) </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">the </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">field’s cardinality</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">. By default, </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">the </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt; font-style:italic">type</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> of an undefined field is considered </span><span style="color:#595959; font-family:Consolas; font-size:10pt">text</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, it is indexed with a full text </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt; font-style:italic">analyzer</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, and it is considered </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt; font-style:italic">single-valued</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">.</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> Let’s demonstrate </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">by modifying the </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">schema </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">of our </span><span style="color:#595959; font-family:Consolas; font-size:10pt">HelloSpider</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> application.</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">With this change, we</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">also demonstrate that schema updates use </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt; font-style:italic">replacement</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> semantics. This means the old schema is completely replaced by the new one. So, if we omit a previously-defined table, it is deleted, along with its data. Any new tables are added, and new fields in an existing table are added. Here’s the schema that will replace our previous </span><span style="color:#595959; font-family:Consolas; font-size:10pt">HelloSpider</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> schema:</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">{"HelloSpider": {</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">    "options": {</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">        "AutoTables": "true",</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">        "StorageService":"SpiderService"</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">    },</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">    "tables": {</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">        "Movies": {</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">            "fields": {</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">                "Budget": {"type": "</span><span style="color:#595959; font-family:Consolas; font-size:10pt">integer</span><span style="color:#595959; font-family:Consolas; font-size:10pt">", "analyzer": "IntegerAnalyzer"},</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">                "Cancelled": {"type": "</span><span style="color:#595959; font-family:Consolas; font-size:10pt">boolean</span><span style="color:#595959; font-family:Consolas; font-size:10pt">", "analyzer":"BooleanAnalyzer"}, </span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">                "Director": {"type":"</span><span style="color:#595959; font-family:Consolas; font-size:10pt">text</span><span style="color:#595959; font-family:Consolas; font-size:10pt">", "analyzer": "TextAnalyzer"},</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">                "Leads": {"type": "</span><span style="color:#595959; font-family:Consolas; font-size:10pt">text</span><span style="color:#595959; font-family:Consolas; font-size:10pt">", "collection": "true", "analyzer": "TextAnalyzer"},</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">                "Name": {"type": "</span><span style="color:#595959; font-family:Consolas; font-size:10pt">text</span><span style="color:#595959; font-family:Consolas; font-size:10pt">", "analyzer": "TextAnalyzer"},</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">                "ReleaseDate": {"type": "</span><span style="color:#595959; font-family:Consolas; font-size:10pt">timestamp</span><span style="color:#595959; font-family:Consolas; font-size:10pt">", "analyzer": "DateAnalyzer"}</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">            }</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">        }</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">    }</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">}}</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">This schema drops the </span><span style="color:#595959; font-family:Consolas; font-size:10pt">Spiders</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> table and adds a new one called </span><span style="color:#595959; font-family:Consolas; font-size:10pt">Movies</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">. Six fields are declared, showing some of the scalar types supported: </span><span style="color:#595959; font-family:Consolas; font-size:10pt">integer</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, </span><span style="color:#595959; font-family:Consolas; font-size:10pt">boolean</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, </span><span style="color:#595959; font-family:Consolas; font-size:10pt">text</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, and </span><span style="color:#595959; font-family:Consolas; font-size:10pt">timestamp</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">. </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">For </span><span style="color:#595959; font-family:Consolas; font-size:10pt">Leads</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">the </span><span style="color:#595959; font-family:Consolas; font-size:10pt">collection</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">property is set </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">to </span><span style="color:#595959; font-family:Consolas; font-size:10pt">true</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">: this makes the field </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt; font-style:italic">multi-valued</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, allowing it to hold a set of values per object.</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> Each field’s </span><span style="color:#595959; font-family:Consolas; font-size:10pt">analyzer</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> is also declared, though </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">in this example </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">the default analyzer </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">is declared </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">for </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">each </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">field.</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Other analyzers such as the </span><span style="color:#595959; font-family:Consolas; font-size:10pt">OpaqueTextAnalyzer</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> and </span><span style="color:#595959; font-family:Consolas; font-size:10pt">NullAnalyzer</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> are available depending on the field type. See the full documentation for more details on analyzers.</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">If the schema above </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">reside</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">s</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> in </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">a file called </span><span style="color:#595959; font-family:Consolas; font-size:10pt">updated-schema.json</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">, we can apply it with the following </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">PUT command:</span></p><p style="margin:12pt 0pt 12pt 18pt; padding-left:18pt; text-indent:-18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">curl -X PUT -H "content-type: </span><span style="color:#595959; font-family:Consolas; font-size:10pt">application/json</span><span style="color:#595959; font-family:Consolas; font-size:10pt">" -d @updated-schema.</span><span style="color:#595959; font-family:Consolas; font-size:10pt">json</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> http://localhost:1123/_applications/HelloSpider</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Now let’s insert some data about </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">S</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">pider</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">-M</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">an </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">movies. This time, we’ll assign the object IDs. See the full batch data in the sample </span><a rel='noreferrer' href="https://github.com/dell-oss/Doradus/blob/master/doradus-client/src/main/java/com/dell/doradus/client/utils/HelloSpider.java" target=_blank"><span style="color:#0000ff; font-family:'Museo Sans For Dell Regular'; font-size:11pt; text-decoration:underline">HelloWorld</span></a><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> application included with the doradus-client package. But here’s a sample:</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">{"batch": {</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">    "docs": [</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">        {"doc": {</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">            "_ID": "Spidy1",</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">            "Name": "Spider-Man",</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">            "ReleaseDate": "2002-05-03",</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">            "Cancelled": false,</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">            "Director": "Sam Raimi",</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">            "Leads": {"add": ["Tobey Maguire", "Kirsten Dunst", "Willem Dafoe"]},</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">            "Budget": 240000000</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">        }},</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="color:#595959; font-family:Consolas; font-size:10pt">{"doc": {</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="color:#595959; font-family:Consolas; font-size:10pt">"_ID": "Spidy2",</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="color:#595959; font-family:Consolas; font-size:10pt">"Name": "Spider-Man 2",</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="color:#595959; font-family:Consolas; font-size:10pt">"ReleaseDate": "2004-06-04",</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="color:#595959; font-family:Consolas; font-size:10pt">"Cancelled": false,</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="color:#595959; font-family:Consolas; font-size:10pt">"Director": "Sam Raimi",</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="color:#595959; font-family:Consolas; font-size:10pt">"Leads": {"add": ["Tobey Maguire", "Kirsten Dunst", "Alfred Molina"]},</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="color:#595959; font-family:Consolas; font-size:10pt">"Budget": 200000000</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="width:18pt; text-indent:0pt; display:inline-block"></span><span style="color:#595959; font-family:Consolas; font-size:10pt">}},</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">        ...</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   ]</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">}}</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">To finish off this tutorial, let’s perform an aggregate query that computes the average budget of the six Spider</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">-</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Man movies </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">based on our loaded data:</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">curl 'http://localhost:1123/HelloSpider/Movies/_aggregate?m=AVERAGE(Budget)</span><span style="color:#595959; font-family:Consolas; font-size:10pt">&amp;format=json</span><span style="color:#595959; font-family:Consolas; font-size:10pt">'</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">This produces the result:</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">{"results":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"aggregate":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">{"metric":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"AVERAGE(Budget)"},</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"totalobjects":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"6",</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">   </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"value":</span><span style="color:#595959; font-family:Consolas; font-size:10pt"> </span><span style="color:#595959; font-family:Consolas; font-size:10pt">"232000000"</span></p><p style="margin:12pt 0pt 12pt 18pt"><span style="color:#595959; font-family:Consolas; font-size:10pt">}}</span></p><p style="margin:12pt 0pt"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">In other words, $23</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">2 million per movie</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> on average</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">.</span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">It’s no wonder that 4 of the 25 most-expensive movies are Spider-Man!</span></p><div style="-aw-different-first-page:true; -aw-headerfooter-type:footer-primary"><p style="margin:0pt"><span style="width:260.65pt; text-indent:0pt; display:inline-block; -aw-tabstop-align:center; -aw-tabstop-pos:260.65pt"></span><br /><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Dell Inc. Confidential</span><span style="width:138.76pt; text-indent:0pt; display:inline-block; -aw-tabstop-align:center; -aw-tabstop-pos:260.65pt"></span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">2015-07-13</span><span style="width:211.55pt; text-indent:0pt; display:inline-block; -aw-tabstop-align:right; -aw-tabstop-pos:522pt"></span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">Page </span><span style="-aw-field-code:'PAGE'"><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">1</span></span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt"> of </span><span style="font-family:'Museo Sans For Dell Regular'; font-size:11pt">7</span></p></div></div></body></html>