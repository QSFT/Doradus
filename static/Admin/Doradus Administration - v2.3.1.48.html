<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <title>Cassandra Connection Parameters</title>
    <link rel="StyleSheet" href="css/Doradus%20Administration%20-%20v2.3.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>
  <body onload="WWHUpdate();" onunload="WWHUnload();" onkeydown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onkeypress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onkeyup="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <a class="WebWorks_Breadcrumb_Link" href="Doradus%20Administration%20-%20v2.3.1.34.html">Doradus Configuration and Operation</a> : <a class="WebWorks_Breadcrumb_Link" href="Doradus%20Administration%20-%20v2.3.1.36.html">Doradus Configuration Files</a> : <a class="WebWorks_Breadcrumb_Link" href="Doradus%20Administration%20-%20v2.3.1.43.html">Configuration Parameters in doradus.yaml</a> : Cassandra Connection Parameters</div>
    <hr align="left" />
    <blockquote>
      <div class="Heading_4"><a name="pID0E0FI0HA">Cassandra Connection Parameters</a></div>
      <div class="Normal"><a name="pID0E0EI0HA">These parameters control connections to the Cassandra database using the Thrift or CQL APIs:</a></div>
      <div class="Code"><a name="pID0E0DI0HA">dbhost: 'localhost'</a></div>
      <div class="Normal" style="margin-left: 36pt"><a name="pID0E0CI0HA">This parameter configures the host name(s) or address(es) of the Cassandra node(s) that the Doradus server connect to. Static IP addresses are preferred over host names. If a comma-separated list of hosts is provided, Doradus will connect to each one in round-robin fashion, allowing load balancing and failover.</a></div>
      <div class="Code"><a name="pID0E0BI0HA">dbport: 9160</a></div>
      <div class="Normal" style="margin-left: 36pt"><a name="pID0E0AI0HA">This is the Cassandra Thrift or CQL API port number. Change this value if Cassandra’s port is using something other than 9160. (Cassandra should use the same port on all nodes.)</a></div>
      <div class="Code"><a name="pID0E06H0HA">jmxport: 7199</a></div>
      <div class="Normal" style="margin-left: 36pt"><a name="pID0E05H0HA">Change this value if Cassandra’s JMX port is using something other than 7199. (Cassandra should use the same port on all nodes.)</a></div>
      <div class="Code"><a name="pID0E04H0HA">db_timeout_millis: 60000</a></div>
      <div class="Normal" style="margin-left: 36pt"><a name="pID0E03H0HA">This is the socket-level Cassandra database connection timeout in milliseconds. It is applicable to both the Thrift and CQL APIs. This time is used both when connecting to Cassandra and when performing read/write operations. If a connect, read, or write request is not received within this time, the connection is closed and a retry is initiated. Note, however, that Cassandra has its own RPC timeout value, which defaults to 10 seconds. This means that read and write operations will typically based on Cassandra’s value and not this one.</a></div>
      <div class="Code"><a name="pID0E02H0HA">db_connect_retry_wait_millis: 30000</a></div>
      <div class="Normal" style="margin-left: 36pt"><a name="pID0E01H0HA">This is the Cassandra database (Thrift) initial connection retry wait in milliseconds. It is applicable to both the Thrift and CQL APIs. If an initial connection to Cassandra times-out (see </a><span class="Code_char">db_timeout_millis</span> above), Doradus waits this amount of time before trying again. Doradus keeps retrying indefinitely under the assumption that Cassandra may take a while to start.</div>
      <div class="Code"><a name="pID0E0ZH0HA">max_commit_attempts: 10</a></div>
      <div class="Normal" style="margin-left: 36pt"><a name="pID0E0YH0HA">This is the maximum number of times Doradus will attempt to perform a Cassandra update operation before aborting the operation. (See also </a><span class="Code_char">retry_wait_millis</span>).</div>
      <div class="Code"><a name="pID0E0XH0HA">max_read_attempts: 3</a></div>
      <div class="Normal" style="margin-left: 36pt"><a name="pID0E0WH0HA">This is the maximum number of times Doradus will attempt to perform a read operation before aborting the operation. (See also </a><span class="Code_char">retry_wait_millis</span>).</div>
      <div class="Code"><a name="pID0E0VH0HA">max_reconnect_attempts: 3</a></div>
      <div class="Normal" style="margin-left: 36pt"><a name="pID0E0UH0HA">This is the maximum number of times Doradus will attempt to reconnect to Cassandra after a failure. A reconnect is performed if a read or update call fails. (See also </a><span class="Code_char">retry_wait_millis</span>).</div>
      <div class="Code"><a name="pID0E0TH0HA">retry_wait_millis: 5000</a></div>
      <div class="Normal" style="margin-left: 36pt"><a name="pID0E0SH0HA">This is the time in milliseconds that Doradus waits after a failed update, read, or reconnect request call to Cassandra. This time is multiplied by the attempt number, which means Doradus waits a little longer after each successive failed call. (See also </a><span class="Code_char">max_commit_attempts</span>, <span class="Code_char">max_read_attempts</span>, and <span class="Code_char">max_reconnect_attempts</span>.)</div>
      <div class="Code"><a name="pID0E0RH0HA">use_cql: false</a></div>
      <div class="Normal" style="margin-left: 36pt"><a name="pID0E0QH0HA">By default, Doradus uses the Thrift API to communicate with Cassandra. When this option is set to </a><span class="Code_char">true</span>, it uses the CQL API instead. CQL must be enabled in each Cassandra instance that Doradus connects via the <span class="Code_char">cassandra.yaml</span> file option <span class="Code_char">start_native_transport: true</span>. Additionally, the <span class="Code_char">doradus.yaml</span> file option <span class="Code_char">dbport</span> must be set to the CQL API’s port (the default is <span class="Code_char">9042</span>).</div>
      <div class="Normal" style="margin-left: 36pt"><span style="font-weight: bold"><a name="pID0E0PH0HA">Note</a></span>: A Doradus database created with the v2.1 or prior release must continue to use the Thrift API. New databases created with the v2.2 release can use either Thrift or CQL. Tests show that the Thrift API is a little faster for bulk data loading by about 3%. But over time, CQL may be faster due to the advantages of prepared statements. CQL is the recommended Cassandra API, and over time the Thrift API may be phased-out.</div>
      <div class="Code"><a name="pID0E0OH0HA">dbtls: false</a></div>
      <div class="Normal" style="margin-left: 36pt"><a name="pID0E0NH0HA">Set to true to use TLS/SSL for connections to Cassandra. This option works for both CQL and Thrift. When </a><span class="Code_char">dbtls</span> is enabled, the options <span class="Code_char">keystore</span> and <span class="Code_char">keystorepassword</span> are used for certificate information.</div>
      <div class="Code"><a name="pID0E0MH0HA">dbtls_cipher_suites: [TLS_RSA_WITH_AES_128_CBC_SHA]</a></div>
      <div class="Normal" style="margin-left: 36pt"><a name="pID0E0LH0HA">Set to a list of one or more cipher suites to be used with SSL/TLS to Cassandra. This option is only meaningful if </a><span class="Code_char">dbtls</span> is set to <span class="Code_char">true</span>. Cassandra must be configured to allow at least one of the same cipher algorithms in order to establish a successful connection. The list can be comma-separated on a single line within square brackets (e.g., [X, Y, Z]), or each cipher suite can be listed on its own line, indented and prefixed with a "-". The cipher suite <span class="Code_char">TLS_RSA_WITH_AES_128_CBC_SHA</span> is generally always allowed by Cassandra.</div>
      <div class="Code"><a name="pID0E0KH0HA">dbuser: cassandra</a></div>
      <div class="Code"><a name="pID0E0JH0HA">dbpassword: cassandra</a></div>
      <div class="Normal" style="margin-left: 36pt"><a name="pID0E0IH0HA">If authentication/authorization is configured for Cassandra, these parameters must be set to a super user that Doradus can use. When Cassandra's authenticator is set to </a><span class="Code_char">PasswordAuthorizer</span>, it initially creates the super id/password <span class="Code_char">cassandra</span>/<span class="Code_char">cassandra</span>. A better password and/or a different super user should be created for Doradus. Remember that these values can be passed-in dynamically as run-time arguments.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>